(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a4069"],{"054b":function(t,e,s){"use strict";s.r(e);var a=s("a523"),r=s("ce7e"),l=s("0fd9"),n=s("71a3"),i=s("c671"),o=s("fe57"),c=s("aac8"),m=function(){var t,e=this,s=e._self._c;return s(a["a"],{staticClass:"pa-0",attrs:{fluid:""}},[e.loading?s("div",{attrs:{justify:"center"}},[s("loader")],1):s("div",[s(l["a"],{staticClass:"body-2 font-weight-bold ml-12 my-4"},[s("span",{staticClass:"ml-4"},[e._v("team: "+e._s(e.user.name))]),s("span",{staticClass:"ml-4"},[e._v("current round: "+e._s(null===(t=e.game)||void 0===t?void 0:t.round))])]),s(r["a"]),s(o["a"],{attrs:{height:"35","background-color":"primary","fixed-tabs":"","slider-color":"accent",dark:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.items,(function(t){return s(n["a"],{key:t,staticClass:"text-capitalize font-weight-bold",attrs:{to:e.link(t),ripple:""}},[e._v(" "+e._s(t)+" ")])})),1),s(c["a"],{attrs:{continuous:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[s(i["a"],{attrs:{value:"/team/reports/sales"}},[s("sales")],1),s(i["a"],{attrs:{value:"/team/reports/retailChannels"}},[s("retail-channels")],1),s(i["a"],{attrs:{value:"/team/reports/segmentResults"}},[s("segment-results")],1)],1)],1)])},u=[],d=s("62ad"),h=function(){var t,e=this,s=e._self._c;return s(a["a"],{attrs:{fluid:""}},[e.loading?s("div",{staticClass:"text-center"},[s("loader")],1):s("div",[s(l["a"],{staticClass:"my-2 subtitle-2 secondary--text pl-12"},[e._v(" Sales (in units) per months ")]),s(r["a"]),s(l["a"],{staticClass:"subtitle-2",attrs:{"no-gutters":""}},[s(d["a"],{staticClass:"tabCell text-left",attrs:{cols:"2"}},[e._v("Products")]),s(r["a"],{attrs:{vertical:""}}),e._l(12,(function(t){return s(d["a"],{key:t,staticClass:"tabCell text-center"},[e._v(" "+e._s(e.months(t))+" ")])})),s(r["a"],{attrs:{vertical:""}}),s(d["a"],{staticClass:"tabCell text-center font-weight-bold"},[e._v("Total")]),s(r["a"],{attrs:{vertical:""}}),s(d["a"],{staticClass:"tabCell text-center"},[e._v("Production plan")]),s(r["a"],{attrs:{vertical:""}}),s(d["a"],{staticClass:"tabCell text-center"},[e._v("Inventories beginning")]),s(r["a"],{attrs:{vertical:""}}),s(d["a"],{staticClass:"tabCell text-right font-weight-bold"},[e._v("Inventories end")])],2),(null===(t=e.sales)||void 0===t?void 0:t.length)>0?s("div",e._l(e.sales,(function(t){var a;return s("div",{key:t.id,staticClass:"body-2"},[s(l["a"],{staticClass:"my-1",attrs:{"no-gutters":""}},[s(d["a"],{staticClass:"text-left",attrs:{cols:"2"}},[e._v(e._s(null===(a=t.trademark)||void 0===a?void 0:a.name)+" "+e._s(t.model))]),s(r["a"],{attrs:{vertical:""}}),e._l(12,(function(a){return s(d["a"],{key:`${t.id} - ${a}`,staticClass:"text-center"},[e._v(" "+e._s(e.formatNumber(e.monthSale(a,t)))+" ")])})),s(r["a"],{attrs:{vertical:""}}),s(d["a"],{staticClass:"text-center font-weight-bold"},[e._v(e._s(e.formatNumber(t.sales_units)))]),s(r["a"],{attrs:{vertical:""}}),s(d["a"],{staticClass:"text-center"},[e._v(e._s(e.formatNumber(t.production_plan)))]),s(r["a"],{attrs:{vertical:""}}),s(d["a"],{staticClass:"text-center"},[e._v(e._s(e.formatNumber(t.inventories_beginning)))]),s(r["a"],{attrs:{vertical:""}}),s(d["a"],{staticClass:"text-right font-weight-bold"},[e._v(e._s(e.formatNumber(t.inventories_end)))])],2),s(r["a"])],1)})),0):s(l["a"],{staticClass:"my-4 error--text",attrs:{justify:"center"}},[e._v(" No data yet ")])],1)])},_=[],v=s("22a5"),g=s("43f5"),f={data(){return{panel:[0]}},computed:{loading(){return this.$store.getters.loading},locale(){return this.$store.getters.locale},user(){return this.$store.getters.user},game(){return this.$store.getters.game},sales(){return this.$store.getters.sales_team},monthSales(){return this.$store.getters.monthSales_team}},methods:{formatNumber(t){let e=0;return t&&(e=Object(v["d"])(t,this.locale)),e},months(t){return Object(v["c"])(t)},monthSale(t,e){var s;let a=0;if((null===(s=this.monthSales)||void 0===s?void 0:s.length)>0){const s=this.monthSales.filter(s=>s.month==t&&s.productId==e.productId);s&&s.forEach(t=>{a+=t.sales})}return a}},components:{Loader:g["default"]},async mounted(){var t;if(null==this.sales&&this.game&&this.user){const t=`${this.user.name}_${this.game.id}`,s=this.game.teams.find(e=>e.name==t),a={gameId:this.game.id,round:this.game.round-1,teamId:s.id};try{await this.$store.dispatch("fetchTeamSales",a)}catch(e){await this.$store.dispatch("setError",e.message)}}if((null===(t=this.monthSales)||void 0===t?void 0:t.length)<1&&this.game&&this.user){const t=`${this.user.name}_${this.game.id}`,s=this.game.teams.find(e=>e.name==t),a={gameId:this.game.id,round:this.game.round-1,teamId:s.id};try{await this.$store.dispatch("fetchTeamMonthsales",a)}catch(e){await this.$store.dispatch("setError",e.message)}}}},b=f,C=s("2877"),p=Object(C["a"])(b,h,_,!1,null,null,null),x=p.exports,y=function(){var t,e,s,n,i,o=this,c=o._self._c;return c(a["a"],{attrs:{fluid:""}},[o.loading?c("div",{staticClass:"text-center"},[c("loader")],1):c("div",[c(l["a"],{staticClass:"my-2 subtitle-2 secondary--text pl-12"},[o._v(" Sales by channels ")]),c(r["a"]),c(l["a"],{staticClass:"subtitle-2",attrs:{"no-gutters":""}},[c(d["a"],{staticClass:"tabCell text-left",attrs:{cols:"2"}},[o._v("Channels")]),o._l(o.headers,(function(t,e){return c(d["a"],{key:e,staticClass:"tabCell",class:t.style},[o._v(" "+o._s(t.title)+" ")])}))],2),(null===(t=o.online)||void 0===t?void 0:t.length)>0?c("div",[c(l["a"],{staticClass:"my-2 subtitle-2 secondary--text pl-12"},[o._v(" Online self operated channel ")]),o._l(o.online,(function(t){return c("div",{key:t.id},[c(l["a"],{staticClass:"body-2",attrs:{"no-gutters":""}},[c(d["a"],{staticClass:"text-left",attrs:{cols:"2"}},[o._v(o._s(t.name))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(t.stores))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.peak_market_coverage)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.peak_market_coverage*t.stores)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.investment_costs)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.operational_costs)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.sales_last)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(o.salesValue(t))))])],1),c(r["a"])],1)}))],2):o._e(),(null===(e=o.outlets)||void 0===e?void 0:e.length)>0?c("div",[c(l["a"],{staticClass:"my-2 subtitle-2 secondary--text pl-12"},[o._v(" Brick&mortar self operated channels ")]),o._l(o.outlets,(function(t){return c("div",{key:t.id},[c(l["a"],{staticClass:"body-2",attrs:{"no-gutters":""}},[c(d["a"],{staticClass:"text-left",attrs:{cols:"2"}},[o._v(o._s(t.name))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(t.stores))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.peak_market_coverage)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.peak_market_coverage*t.stores)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.investment_costs)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.operational_costs)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.sales_last)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(o.salesValue(t))))])],1),c(r["a"])],1)}))],2):o._e(),(null===(s=o.franchises)||void 0===s?void 0:s.length)>0?c("div",[c(l["a"],{staticClass:"my-2 subtitle-2 secondary--text pl-12"},[o._v(" Franchises ")]),o._l(o.franchises,(function(t){return c("div",{key:t.id},[c(l["a"],{staticClass:"body-2",attrs:{"no-gutters":""}},[c(d["a"],{staticClass:"text-left",attrs:{cols:"2"}},[o._v(o._s(t.name))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(t.stores))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.peak_market_coverage)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.peak_market_coverage*t.stores)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.investment_costs)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.operational_costs)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.sales_last)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(o.salesValue(t))))])],1),c(r["a"])],1)}))],2):o._e(),(null===(n=o.marketplaces)||void 0===n?void 0:n.length)>0?c("div",[c(l["a"],{staticClass:"my-2 subtitle-2 secondary--text pl-12"},[o._v(" Marketplaces ")]),o._l(o.marketplaces,(function(t){return c("div",{key:t.id},[c(l["a"],{staticClass:"body-2",attrs:{"no-gutters":""}},[c(d["a"],{staticClass:"text-left",attrs:{cols:"2"}},[o._v(o._s(t.name))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(t.stores))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.peak_market_coverage)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.peak_market_coverage*t.stores)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.investment_costs)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.operational_costs)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.sales_last)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(o.salesValue(t))))])],1),c(r["a"])],1)}))],2):o._e(),(null===(i=o.independent)||void 0===i?void 0:i.length)>0?c("div",[c(l["a"],{staticClass:"my-2 subtitle-2 secondary--text pl-12"},[o._v(" Independent chains ")]),o._l(o.independent,(function(t){return c("div",{key:t.id},[c(l["a"],{staticClass:"body-2",attrs:{"no-gutters":""}},[c(d["a"],{staticClass:"text-left",attrs:{cols:"2"}},[o._v(o._s(t.name))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(t.stores))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.peak_market_coverage)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.peak_market_coverage*t.stores)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.investment_costs)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.operational_costs)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.sales_last)))]),c(d["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(o.salesValue(t))))])],1),c(r["a"])],1)}))],2):o._e()],1)])},k=[],$={data(){return{panel:[0],headers:[{title:"Stores",style:"text-center"},{title:"Peak market coverage (1 store)",style:"text-center"},{title:"Peak market coverage (entire channel)",style:"text-center"},{title:"Investments",style:"text-center"},{title:"Operational costs",style:"text-center"},{title:"Sales in units",style:"text-center"},{title:"Sales in cash",style:"text-center"}]}},computed:{loading(){return this.$store.getters.loading},locale(){return this.$store.getters.locale},user(){return this.$store.getters.user},game(){return this.$store.getters.game},channels(){return this.$store.getters.channels},sales(){return this.$store.getters.sales_team},online(){var t;let e=[];return(null===(t=this.channels)||void 0===t?void 0:t.length)>0&&(e=this.channels.filter(t=>1==t.type)),e},outlets(){var t;let e=[];return(null===(t=this.channels)||void 0===t?void 0:t.length)>0&&(e=this.channels.filter(t=>2==t.type||3==t.type)),e},franchises(){var t;let e=[];return(null===(t=this.channels)||void 0===t?void 0:t.length)>0&&(e=this.channels.filter(t=>4==t.type)),e},independent(){var t;let e=[];return(null===(t=this.channels)||void 0===t?void 0:t.length)>0&&(e=this.channels.filter(t=>8==t.type)),e},marketplaces(){var t;let e=[];return(null===(t=this.channels)||void 0===t?void 0:t.length)>0&&(e=this.channels.filter(t=>7==t.type)),e}},methods:{formatNumber(t){let e=0;return t&&(e=Object(v["d"])(t,this.locale)),e},salesValue(t){var e;let s=0;return(null===(e=this.sales)||void 0===e?void 0:e.length)>0&&this.sales.forEach(e=>{for(let a=0;a<e.channels.length;a++)e.channels[a]==t.name&&(s+=e.channels_sales_cash[a])}),s}},components:{Loader:g["default"]},async mounted(){if(null==this.channels&&this.game&&this.user&&this.game.round>0){const e=`${this.user.name}_${this.game.id}`,s=this.game.teams.find(t=>t.name==e),a={gameId:this.game.id,round:this.game.round-1,teamId:s.id};try{await this.$store.dispatch("fetchTeamChannels",a)}catch(t){await this.$store.dispatch("setError",t.message)}}if(null==this.sales&&this.game&&this.user&&this.game.round>0){const e=`${this.user.name}_${this.game.id}`,s=this.game.teams.find(t=>t.name==e),a={gameId:this.game.id,round:this.game.round-1,teamId:s.id};try{await this.$store.dispatch("fetchTeamSales",a)}catch(t){await this.$store.dispatch("setError",t.message)}}}},N=$,w=Object(C["a"])(N,y,k,!1,null,null,null),S=w.exports,I=function(){var t,e,s=this,n=s._self._c;return n(a["a"],{attrs:{fluid:""}},[s.loading?n("div",{staticClass:"text-center"},[n("loader")],1):n("div",[n(l["a"],{staticClass:"my-2 subtitle-2 secondary--text pl-12"},[s._v(" Sales (in units) per segments ")]),(null===(t=s.market_segments)||void 0===t?void 0:t.length)>0?n("div",[n(r["a"]),n(l["a"],{staticClass:"subtitle-2",attrs:{"no-gutters":""}},[n(d["a"],{staticClass:"tabCell text-left",attrs:{cols:"2"}},[s._v("Products")]),n(r["a"],{attrs:{vertical:""}}),s._l(s.market_segments,(function(t){return n(d["a"],{key:t.id,staticClass:"tabCell text-center"},[s._v(" "+s._s(t.segment.name)+" ")])})),n(r["a"],{attrs:{vertical:""}}),n(d["a"],{staticClass:"tabCell text-center font-weight-bold"},[s._v("Total (year)")])],2),(null===(e=s.sales)||void 0===e?void 0:e.length)>0?n("div",s._l(s.sales,(function(t){return n("div",{key:t.id},[n(l["a"],{staticClass:"body-2 my-1",attrs:{"no-gutters":""}},[n(d["a"],{staticClass:"text-left",attrs:{cols:"2"}},[s._v(s._s(t.trademark.name)+" - "+s._s(t.model))]),n(r["a"],{attrs:{vertical:""}}),s._l(s.market_segments,(function(e){return n(d["a"],{key:e.id,staticClass:"text-center"},[s._v(" "+s._s(s.formatNumber(s.segmentSale(t,e)))+" ")])})),n(r["a"],{attrs:{vertical:""}}),n(d["a"],{staticClass:"text-center font-weight-bold"},[s._v(s._s(s.formatNumber(t.sales_units)))])],2),n(r["a"])],1)})),0):s._e()],1):s._e()],1)])},j=[],O=(s("13d5"),{data(){return{panel:[0]}},computed:{loading(){return this.$store.getters.loading},locale(){return this.$store.getters.locale},user(){return this.$store.getters.user},game(){return this.$store.getters.game},monthSales(){return this.$store.getters.monthSales_team},sales(){return this.$store.getters.sales_team},market_segments(){return this.$store.getters.market_segments}},methods:{formatNumber(t){let e=0;return t&&(e=Object(v["d"])(t,this.locale)),e},segmentSale(t,e){var s;let a=0;if((null===(s=this.monthSales)||void 0===s?void 0:s.length)>0){const s=this.monthSales.filter(s=>s.productId==t.productId&&s.segmentId==e.segmentId);s.length>0&&(a=s.reduce((t,e)=>t+e.sales_normalized,0))}return a}},components:{Loader:g["default"]},async mounted(){var t,e;if((null===(t=this.monthSales)||void 0===t?void 0:t.length)<1&&this.game&&this.user&&Number(this.game.round)>0){const t=`${this.user.name}_${this.game.id}`,e=this.game.teams.find(e=>e.name==t),a={gameId:this.game.id,round:this.game.round-1,teamId:e.id};try{await this.$store.dispatch("fetchTeamMonthsales",a)}catch(s){await this.$store.dispatch("setError",s.message)}}if((null===(e=this.market_segments)||void 0===e?void 0:e.length)<1&&this.game){const t={gameId:this.game.id,round:this.game.round};await this.$store.dispatch("fetchMarketSegments",t)}if(null==this.sales&&this.game&&this.user&&this.game.round>0){const t=`${this.user.name}_${this.game.id}`,e=this.game.teams.find(e=>e.name==t),a={gameId:this.game.id,round:this.game.round-1,teamId:e.id};try{await this.$store.dispatch("fetchTeamSales",a)}catch(s){await this.$store.dispatch("setError",s.message)}}}}),E=O,T=Object(C["a"])(E,I,j,!1,null,null,null),V=T.exports,L={data(){return{tab:0,items:["Sales","Retail channels","Segment results"],valid:!1,error:"",selected:null,numberRules:[t=>/^[+]?[0-9]/.test(t)||"it's expected number"]}},computed:{loading(){return this.$store.getters.loading},user(){return this.$store.getters.user},game(){return this.$store.getters.game}},methods:{link(t){const e=t.split(" "),s=e[0].toLowerCase();let a="";return e[1]&&(a=e[1][0].toUpperCase()+e[1].substr(1)),"/team/reports/"+(s+a)}},async mounted(){if(!this.game&&this.user){const e=this.user.email.match(/\d/g);try{await this.$store.dispatch("fetchGame",e)}catch(t){console.log(t.message)}}},components:{Sales:x,RetailChannels:S,SegmentResults:V,Loader:g["default"]}},P=L,R=Object(C["a"])(P,m,u,!1,null,null,null);e["default"]=R.exports}}]);
//# sourceMappingURL=chunk-2d0a4069.d513729c.js.map