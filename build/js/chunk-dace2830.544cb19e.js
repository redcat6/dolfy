(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dace2830"],{"0393":function(t,e,a){"use strict";a("210b");var s=a("604c"),r=a("d9bd");e["a"]=s["a"].extend({name:"v-expansion-panels",provide(){return{expansionPanels:this}},props:{accordion:Boolean,disabled:Boolean,flat:Boolean,hover:Boolean,focusable:Boolean,inset:Boolean,popout:Boolean,readonly:Boolean,tile:Boolean},computed:{classes(){return{...s["a"].options.computed.classes.call(this),"v-expansion-panels":!0,"v-expansion-panels--accordion":this.accordion,"v-expansion-panels--flat":this.flat,"v-expansion-panels--hover":this.hover,"v-expansion-panels--focusable":this.focusable,"v-expansion-panels--inset":this.inset,"v-expansion-panels--popout":this.popout,"v-expansion-panels--tile":this.tile}}},created(){this.$attrs.hasOwnProperty("expand")&&Object(r["a"])("expand","multiple",this),Array.isArray(this.value)&&this.value.length>0&&"boolean"===typeof this.value[0]&&Object(r["a"])(':value="[true, false, true]"',':value="[0, 2]"',this)},methods:{updateItem(t,e){const a=this.getValue(t,e),s=this.getValue(t,e+1);t.isActive=this.toggleMethod(a),t.nextIsActive=this.toggleMethod(s)}}})},"07ee":function(t,e,a){"use strict";a.r(e);var s=a("a523"),r=a("ce7e"),i=a("0fd9"),n=a("71a3"),o=a("c671"),l=a("fe57"),c=a("aac8"),d=function(){var t,e=this,a=e._self._c;return a(s["a"],{staticClass:"pa-0",attrs:{fluid:""}},[e.loading?a(i["a"],{attrs:{justify:"center"}},[a("loader")],1):a("div",[a(i["a"],{staticClass:"body-2 font-weight-bold ml-12 my-4"},[a("span",{staticClass:"ml-4"},[e._v("team: "+e._s(e.user.name))]),a("span",{staticClass:"ml-4"},[e._v("current round: "+e._s(null===(t=e.game)||void 0===t?void 0:t.round))])]),a(r["a"]),a(l["a"],{attrs:{height:"35","background-color":"primary","fixed-tabs":"","slider-color":"accent",dark:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a(n["a"],{staticClass:"text-capitalize font-weight-bold white--text",attrs:{to:"/team/decisions/pm"}},[e._v(" Product management ")]),e._l(e.items,(function(t){return a(n["a"],{key:t,staticClass:"text-capitalize font-weight-bold white--text",attrs:{to:e.link(t)}},[e._v(" "+e._s(t)+" ")])}))],2),a(c["a"],{attrs:{continuous:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a(o["a"],{attrs:{value:"/team/decisions/pm"}},[a("product-management")],1),a(o["a"],{attrs:{value:"/team/decisions/sales"}},[a("sales")],1),a(o["a"],{attrs:{value:"/team/decisions/retail"}},[a("retail")],1),a(o["a"],{attrs:{value:"/team/decisions/promotion"}},[a("promotion")],1),a(o["a"],{attrs:{value:"/team/decisions/resources"}},[a("resources")],1)],1)],1)],1)},h=[],u=a("62ad"),m=a("cd55"),p=a("49e2"),v=a("c865"),g=a("0393"),f=function(){var t,e=this,a=e._self._c;return a(s["a"],{attrs:{fluid:""}},[e.loading?a("div",{staticClass:"text-center"},[a("loader")],1):a("div",[a(i["a"],{staticClass:"my-2 subtitle-2 secondary--text pl-12"},[e._v(" Products ")]),a(i["a"],{staticClass:"subtitle-2 mx-8",attrs:{"no-gutters":""}},e._l(e.headers,(function(t,s){return a(u["a"],{key:s,staticClass:"tabCell",class:t.style},[e._v(" "+e._s(t.title)+" ")])})),1),(null===(t=e.products)||void 0===t?void 0:t.length)>0?a("div",[a(g["a"],{attrs:{focusable:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.modelsByTrademark,(function(t){return a(m["a"],{key:t.trademarkId},[a(v["a"],{staticClass:"font-weight-bold secondary--text"},[e._v(" "+e._s(t.trademark)+" ")]),a(p["a"],{staticClass:"body-2"},[e._l(t.models,(function(t){return a("div",{key:t.id},[a(i["a"],{attrs:{"no-gutters":""}},[a(u["a"],{staticClass:"text-left"},[e._v(e._s(t.model))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(e.stringMonth(t.available_from)))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(e.stringMonth(t.available_till)))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(e.status(t)))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(t.material))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(t.manufacturing))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(t.design_type))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(t.design))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(t.variations))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(t.advanced_feature))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(t.unit_cost))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(e.formatNumber(t.investments)))]),"available"==e.status(t)?a(u["a"],{staticClass:"text-right"},[a("upgrade-model",{attrs:{product:t}}),a("delete-product",{attrs:{product:t}})],1):a(u["a"],{staticClass:"text-right"},[a("delete-product",{attrs:{product:t}})],1)],1),a(r["a"])],1)})),a(i["a"],{staticClass:"my-4 mx-8",attrs:{justify:"end"}},[a("add-model",{attrs:{brand:t}})],1)],2)],1)})),1)],1):a(i["a"],{staticClass:"mt-8 px-4"},[e._v(" You haven't products yet! ")]),a("div",{staticClass:"my-4 ml-12 text-start"},[a("add-brand")],1)],1)])},_=[],x=a("43f5"),b=a("8336"),y=a("b0af"),k=a("99d9"),C=a("169a"),$=a("4bd4"),w=a("b974"),j=a("2fa4"),O=a("8654"),I=function(){var t=this,e=t._self._c;return e(C["a"],{attrs:{persistent:"",scrollable:"","max-width":"600px","hide-overlay":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b["a"],t._g({staticClass:"text-lowercase mr-4",attrs:{color:"secondary",dark:"",small:""}},a),[t._v(" add model ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?e("div",{staticClass:"text-center"},[e("loader")],1):e(y["a"],[e(j["a"]),e(k["c"],{staticClass:"subtitle-2 pt-6 text-pre-wrap"},[t._v(" Add new model to the trademark "),e("span",{staticClass:"secondary--text"},[t._v(t._s(t.trademark))])]),e(r["a"]),e(k["b"],{staticClass:"black--text"},[e(s["a"],{attrs:{"grid-list-md":""}},[e($["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(i["a"],[e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(O["a"],{attrs:{dense:"",color:"secondary",label:"model name",name:"name",type:"text",rules:[t.rules.required]},on:{change:function(e){return t.validName()}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(w["a"],{attrs:{dense:"",items:t.levelItems,color:"secondary","item-color":"secondary",label:"material",rules:[t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.material,callback:function(e){t.material=t._n(e)},expression:"material"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(w["a"],{attrs:{dense:"",items:t.levelItems,color:"secondary","item-color":"secondary",label:"manufacturing",rules:[t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.manufacturing,callback:function(e){t.manufacturing=t._n(e)},expression:"manufacturing"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(w["a"],{attrs:{dense:"",items:t.items,color:"secondary","item-color":"secondary",label:"design type",rules:[t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.designType,callback:function(e){t.designType=e},expression:"designType"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(w["a"],{attrs:{dense:"",items:t.levelItems,color:"secondary","item-color":"secondary",label:"design level",rules:[t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.design,callback:function(e){t.design=t._n(e)},expression:"design"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(w["a"],{attrs:{dense:"",items:t.levelItems,color:"secondary","item-color":"secondary",label:"variations",rules:[t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.variations,callback:function(e){t.variations=t._n(e)},expression:"variations"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(w["a"],{attrs:{dense:"","return-object":"","item-text":"text","item-value":"value",items:t.features,clearable:!0,color:"secondary","item-color":"secondary",label:"advanced feature"},on:{change:function(e){return t.onceMore()}},model:{value:t.advanced_feature,callback:function(e){t.advanced_feature=e},expression:"advanced_feature"}})],1)],1)],1)],1),t.error?e(i["a"],{staticClass:"mx-2 error--text",attrs:{justify:"center"}},[t._v("! error: "+t._s(t.error))]):t._e(),e(i["a"],{staticClass:"text-pre-wrap mx-2",attrs:{justify:"start"}},[t._v(" "+t._s(t.message)+" ")])],1),e(r["a"]),e(k["a"],[e(j["a"]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",loading:t.loading,disabled:!t.valid||t.loading||t.calculating||Boolean(t.error)},on:{click:t.calculate}},[t._v("Calculate")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",disabled:!t.calculating||Boolean(t.error)},on:{click:t.addModel}},[t._v("Save")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:""},on:{click:t.closeDialog}},[t._v(" Close ")])],1)],1)],1)},S=[],A=a("2f9a"),T=a("22a5"),M={props:["brand"],data(){return{dialog:!1,valid:!1,message:"",error:"",calculating:!1,trademark:this.brand.trademark,id:this.brand.id,rules:{required:t=>!!t||"required field"},items:["classic","business","casual","innovative","art"],levelItems:[1,2,3,4,5],name:"",material:1,manufacturing:1,designType:"",advanced_feature:{},design:1,variations:1,investments:0,unit_cost:0,available_from:1,available_till:12}},computed:{loading(){return this.$store.getters.loading},locale(){return this.$store.getters.locale},game(){return this.$store.getters.game},user(){return this.$store.getters.user},features(){return this.$store.getters.FEATURES}},methods:{calculate(){this.calculating=!0,this.$refs.form.validate()&&(this.advanced_feature.text?(this.unit_cost=Object(A["c"])(this.material,this.manufacturing,this.variations,this.advanced_feature.value),this.investments=Object(A["b"])(this.material,this.manufacturing,this.variations,this.design,this.advanced_feature.value),this.available_from=Object(A["a"])(this.material,this.manufacturing,this.variations,this.design,this.advanced_feature.value)):(this.unit_cost=Object(A["c"])(this.material,this.manufacturing,this.variations),this.investments=Object(A["b"])(this.material,this.manufacturing,this.variations,this.design),this.available_from=Object(A["a"])(this.material,this.manufacturing,this.variations,this.design)),this.message=`Please, mention the figures:\n\t\t\t\t\t\tmodel ${this.name} will be available from ${Object(T["c"])(this.available_from)},\n\t\t\t\t\t\tinvestments = $${Object(T["d"])(this.investments,this.locale)},\n\t\t\t\t\t\tunit cost = $${this.unit_cost}.\n\t\t\t\t\tif you agree, press the button Save, else - press Close`,this.calculating=!0)},onceMore(){this.message="",this.error="",this.calculating=!1},validName(){const t=this.brand.models.find(t=>t.model==this.name);t?(this.error=`model name ${this.name} has already been used`,this.message=""):this.onceMore()},async addModel(){var t;let e="";null!==(t=this.advanced_feature)&&void 0!==t&&t.text&&(e=this.advanced_feature.text);const a="_"+Object(T["b"])(9),s=`${this.user.name}_${this.game.id}`,r=this.game.teams.find(t=>t.name==s),i={gameId:this.game.id,round:this.game.round,productId:a,trademark:this.trademark,model:this.name,available_from:this.available_from,available_till:this.available_till,material:this.material,manufacturing:this.manufacturing,design_type:this.designType,design:this.design,variations:this.variations,advanced_feature:e,teamId:r.id,investments:this.investments,unit_cost:this.unit_cost};console.log(i);try{await this.$store.dispatch("addProduct",i),this.closeDialog()}catch(n){this.$store.dispatch("setError",n.message)}this.closeDialog()},closeDialog(){this.dialog=!1,this.calculating=!1,this.message="",this.error=""}},components:{Loader:x["default"]}},E=M,N=a("2877"),D=Object(N["a"])(E,I,S,!1,null,null,null),z=D.exports,B=a("132d"),P=a("3a2f"),q=function(){var t=this,e=t._self._c;return e(C["a"],{attrs:{persistent:"","max-width":"600px","hide-overlay":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b["a"],t._g({staticClass:"text-lowercase",attrs:{color:"secondary",icon:""}},a),[e(P["a"],{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(B["a"],t._g({attrs:{small:""}},a),[t._v("mdi-lead-pencil")])]}}],null,!0)},[e("span",[t._v("upgrade model")])])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?e("div",{staticClass:"text-center"},[e("loader")],1):e(y["a"],[e(j["a"]),e(k["c"],{staticClass:"subtitle-2 pt-6 text-pre-wrap"},[t._v(" Change parameters of the "),e("span",{staticClass:"secondary--text"},[t._v(" "+t._s(t.product.trademark.name)+" "+t._s(t.product.model))])]),e(r["a"]),e(k["b"],{staticClass:"black--text"},[e(s["a"],{attrs:{"grid-list-md":""}},[e($["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(i["a"],[e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(O["a"],{attrs:{dense:"",color:"secondary",label:"material",name:"material",type:"text",rules:[t.rules.number,t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.material,callback:function(e){t.material=t._n(e)},expression:"material"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(O["a"],{attrs:{dense:"",color:"secondary",label:"manufacturing",name:"manufacturing",type:"text",rules:[t.rules.number,t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.manufacturing,callback:function(e){t.manufacturing=t._n(e)},expression:"manufacturing"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(O["a"],{attrs:{dense:"",color:"secondary",label:"variations",name:"variations",type:"text",rules:[t.rules.number,t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.variations,callback:function(e){t.variations=t._n(e)},expression:"variations"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(w["a"],{attrs:{dense:"","return-object":"","item-text":"text","item-value":"value",items:t.features,clearable:!0,color:"secondary","item-color":"secondary",label:"advanced feature"},on:{change:function(e){return t.onceMore()}},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)],1)],1)],1),t.error?e(i["a"],{staticClass:"mx-2 error--text",attrs:{justify:"center"}},[t._v("! "+t._s(t.error))]):t._e(),e(i["a"],{staticClass:"text-pre-wrap mx-2",attrs:{justify:"center"}},[t._v(t._s(t.message))])],1),e(r["a"]),e(k["a"],[e(j["a"]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",loading:t.loading,disabled:!t.valid||t.loading||t.calculating||Boolean(t.error)},on:{click:t.calculate}},[t._v(" Calculate ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",disabled:!t.calculating||Boolean(t.error)},on:{click:t.upgradeModel}},[t._v(" Save ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:""},on:{click:t.closeDialog}},[t._v(" Close ")])],1)],1)],1)},L=[],R={props:["product"],data(){return{dialog:!1,valid:!1,message:"",error:"",calculating:!1,trademark:this.product.trademark,name:this.product.model,id:this.product.id,rules:{required:t=>!!t||"required field",number:t=>/^[+]?[1-5]/.test(t)||"it's expected number from 1 to 5"},features:[{text:"positioning tracker",value:1},{text:"power bank",value:2},{text:"missed items warning",value:3},{text:"danger alarm",value:4},{text:"fridge camera",value:5},{text:"individual pictures",value:6},{text:"against loss insurance",value:7},{text:"environment friendly utilization",value:8},{text:"charity profit sharing",value:9}],material:this.product.material,manufacturing:this.product.manufacturing,advanced_feature:{},variations:this.product.variations,investments:0,unit_cost:0,available_from:1,available_till:12}},computed:{loading(){return this.$store.getters.loading},products(){return this.$store.getters.products},selected:{get(){return this.advanced_feature},set(t){return this.advanced_feature=t}}},methods:{calculate(){if(this.$refs.form.validate()){var t;if(this.material==this.product.material&&this.manufacturing==this.product.manufacturing&&this.variations==this.product.variations&&(null===(t=this.advanced_feature)||void 0===t?void 0:t.text)==this.product.advanced_feature)return this.error="no parameters have been changed";this.advanced_feature?(this.unit_cost=Object(A["c"])(this.material,this.manufacturing,this.variations,this.advanced_feature.value),this.investments=Object(A["e"])(this.product.material,this.product.manufacturing,this.product.variations,this.product.design,this.material,this.manufacturing,this.variations,this.advanced_feature.value),this.available_from=Object(A["d"])(this.material,this.manufacturing,this.product.variations,this.variations,this.advanced_feature.value)):(this.unit_cost=Object(A["c"])(this.material,this.manufacturing,this.variations),this.investments=Object(A["e"])(this.product.material,this.product.manufacturing,this.product.variations,this.product.design,this.material,this.manufacturing,this.variations),this.available_from=Object(A["d"])(this.material,this.manufacturing,this.product.variations,this.variations)),this.message=`Please, mention the figures:\n\t\t\t\t\t\t\tupgraded model ${this.name} \n\t\t\t\t\t\t\twill be available from ${Object(T["c"])(this.available_from)},\n\t\t\t\t\t\t\tinvestments = $${Object(T["d"])(this.investments,this.locale)},\n\t\t\t\t\t\t\tunit cost = $${this.unit_cost}.\n\t\t\t\t\t\tif you agree, press the button Save, else - press Close`,this.calculating=!0}},onceMore(){this.calculating=!1,this.message="",this.error=""},async upgradeModel(){var t,e;let a="";null!==(t=this.advanced_feature)&&void 0!==t&&t.text&&(a=this.advanced_feature.text);const s="_"+Object(T["b"])(9),r={gameId:this.product.gameId,round:this.product.round,productId:s,trademark:this.product.trademark.name,model:this.name+"_upgraded",available_from:this.available_from,available_till:this.available_till,material:this.material,manufacturing:this.manufacturing,design_type:this.product.design_type,design:this.product.design,variations:this.variations,advanced_feature:a,teamId:this.product.team.id,investments:this.investments,unit_cost:this.unit_cost};try{await this.$store.dispatch("addProduct",r),this.closeDialog()}catch(o){this.$store.dispatch("setError",o.message)}const i=this.product.model.split("_")[0],n=null===(e=this.products)||void 0===e?void 0:e.find(t=>t.model==i&&t.trademarkId==this.product.trademarkId);if(n){const t={...n,available_till:this.available_from-1};try{await this.$store.dispatch("editProduct",t)}catch(o){await this.$store.dispatch("setError",o.message)}}this.closeDialog()},closeDialog(){if(this.dialog=!1,this.calculating=!1,this.message="",this.error="",this.material=this.product.material,this.manufacturing=this.product.manufacturing,this.variations=this.product.variations,this.product&&this.features){let t=this.features.find(t=>t.text==this.product.advanced_feature);t&&(t=t.value,this.advanced_feature={text:this.product.advanced_feature,value:t})}}},components:{Loader:x["default"]},mounted(){if(this.product&&this.features){let t=this.features.find(t=>t.text==this.product.advanced_feature);t&&(t=t.value,this.advanced_feature={text:this.product.advanced_feature,value:t})}}},F=R,U=Object(N["a"])(F,q,L,!1,null,null,null),Y=U.exports,H=function(){var t=this,e=t._self._c;return e(C["a"],{attrs:{"max-width":"450px","hide-overlay":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b["a"],t._g({staticClass:"text-lowercase",attrs:{color:"secondary",icon:""}},a),[e(P["a"],{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(B["a"],t._g({attrs:{small:""}},a),[t._v("mdi-delete")])]}}],null,!0)},[e("span",[t._v("delete model")])])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?e("div",{staticClass:"text-center"},[e("loader")],1):e(y["a"],[e(j["a"]),e(k["c"],{staticClass:"subtitle-2 pt-6 text-pre-wrap"},[t._v(" Do you really want to delete the model "),e("span",{staticClass:"secondary--text"},[t._v(t._s(t.product.trademark.name)+" "+t._s(t.product.model)+" ")]),t._v("? ")]),e(r["a"]),e(k["b"],{staticClass:"error--text text-justify"},[t._v(" Warrning: if you have only one model in a trademark, you will delete the model and the trademark ")]),e(r["a"]),e(k["a"],[e(j["a"]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"error",text:""},on:{click:t.deleteProduct}},[t._v(" Yes ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:""},on:{click:t.closeDialog}},[t._v(" No ")])],1)],1)],1)},W=[],V={props:["product"],data(){return{dialog:!1}},computed:{loading(){return this.$store.getters.loading},products(){return this.$store.getters.products}},methods:{async deleteProduct(){const t=this.product.model.split("_")[0];if(t){var e;const s=null===(e=this.products)||void 0===e?void 0:e.find(e=>e.model==t&&e.trademarkId==this.product.trademarkId);if(s){const t={...s,available_till:12};try{await this.$store.dispatch("editProduct",t)}catch(a){await this.$store.dispatch("setError",a.message)}}}try{await this.$store.dispatch("deleteProduct",this.product.id)}catch(a){console.log(a.message)}this.closeDialog()},closeDialog(){this.dialog=!1}},components:{Loader:x["default"]}},Z=V,X=Object(N["a"])(Z,H,W,!1,null,null,null),G=X.exports,J=function(){var t=this,e=t._self._c;return e(C["a"],{attrs:{persistent:"",scrollable:"","max-width":"600px","hide-overlay":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b["a"],t._g({staticClass:"text-lowercase",attrs:{color:"secondary",dark:"",small:""}},a),[t._v(" add trademark ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?e("div",{staticClass:"text-center"},[e("loader")],1):e(y["a"],[e(j["a"]),e(k["c"],{staticClass:"subtitle-2 pt-6"},[t._v(" New trademark & model parameters ")]),e(r["a"]),e(k["b"],{staticClass:"black--text"},[e(s["a"],{attrs:{"grid-list-md":""}},[e($["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(i["a"],[e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(O["a"],{attrs:{dense:"",color:"secondary",label:"trademark",name:"trademark",type:"text",rules:[t.rules.required]},model:{value:t.trademark,callback:function(e){t.trademark=e},expression:"trademark"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(O["a"],{attrs:{dense:"",color:"secondary",label:"model name",name:"name",type:"text",rules:[t.rules.required]},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(w["a"],{attrs:{dense:"",items:t.levelItems,color:"secondary","item-color":"secondary",label:"material",rules:[t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.material,callback:function(e){t.material=t._n(e)},expression:"material"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(w["a"],{attrs:{dense:"",items:t.levelItems,color:"secondary","item-color":"secondary",label:"manufacturing",rules:[t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.manufacturing,callback:function(e){t.manufacturing=t._n(e)},expression:"manufacturing"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(w["a"],{staticClass:"text-left",attrs:{dense:"",items:t.items,color:"secondary","item-color":"secondary",label:"design type",rules:[t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.design_type,callback:function(e){t.design_type=e},expression:"design_type"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(w["a"],{attrs:{dense:"",items:t.levelItems,color:"secondary","item-color":"secondary",label:"design level",rules:[t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.design,callback:function(e){t.design=t._n(e)},expression:"design"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(w["a"],{attrs:{dense:"",items:t.levelItems,color:"secondary","item-color":"secondary",label:"variations"},on:{change:function(e){return t.onceMore()}},model:{value:t.variations,callback:function(e){t.variations=e},expression:"variations"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(w["a"],{attrs:{dense:"","return-object":"","item-text":"text","item-value":"value",items:t.features,clearable:!0,color:"secondary","item-color":"secondary",label:"advanced feature"},on:{change:function(e){return t.onceMore()}},model:{value:t.advanced_feature,callback:function(e){t.advanced_feature=e},expression:"advanced_feature"}})],1)],1)],1)],1),e(i["a"],{staticClass:"mx-2 error",attrs:{justify:"center"}},[t._v(t._s(t.error))]),e(i["a"],{staticClass:"text-pre-wrap mx-2",attrs:{justify:"center"}},[t._v(t._s(t.message))])],1),e(r["a"]),e(k["a"],[e(j["a"]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",loading:t.loading,disabled:t.calculating||!t.valid||t.loading||Boolean(t.error)},on:{click:t.calculate}},[t._v(" Calculate ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",disabled:!t.calculating||Boolean(t.error)},on:{click:t.addBrand}},[t._v(" Save ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:""},on:{click:t.closeDialog}},[t._v(" Close ")])],1)],1)],1)},K=[],Q={data(){return{dialog:!1,valid:!1,message:"",error:"",calculating:!1,rules:{required:t=>!!t||"required field",number:t=>/^[+]?[1-5]/.test(t)||"it's expected number from 1 to 5"},trademark:"",name:"",material:1,manufacturing:1,design_type:"",advanced_feature:{},design:1,variations:1,available_from:1,available_till:12,levelItems:[1,2,3,4,5],investments:0,unit_cost:0}},computed:{loading(){return this.$store.getters.loading},locale(){return this.$store.getters.locale},user(){return this.$store.getters.user},game(){return this.$store.getters.game},features(){return this.$store.getters.FEATURES},items(){return this.$store.getters.DESIGN_TYPES}},methods:{calculate(){this.$refs.form.validate()&&(this.advanced_feature.text?(this.unit_cost=Object(A["c"])(this.material,this.manufacturing,this.variations,this.advanced_feature.value),this.investments=Object(A["b"])(this.material,this.manufacturing,this.variations,this.design,this.advanced_feature.value),this.available_from=Object(A["a"])(this.material,this.manufacturing,this.variations,this.design,this.advanced_feature.value)):(this.unit_cost=Object(A["c"])(this.material,this.manufacturing,this.variations),this.investments=Object(A["b"])(this.material,this.manufacturing,this.variations,this.design),this.available_from=Object(A["a"])(this.material,this.manufacturing,this.variations,this.design)),this.message=`Please, mention the figures:\n\t\t\t\t\tmodel ${this.name} will be available from ${Object(T["c"])(this.available_from)},\n\t\t\t\t\tinvestments = $${Object(T["d"])(this.investments,this.locale)},\n\t\t\t\t\tunit cost = $${this.unit_cost}.\n\t\t\t\t\tif you agree, press the button Save, else - press Close`,this.calculating=!0)},onceMore(){this.message="",this.error="",this.calculating=!1},async addBrand(){var t;let e="";null!==(t=this.advanced_feature)&&void 0!==t&&t.text&&(e=this.advanced_feature.text);const a="_"+Object(T["b"])(9),s=`${this.user.name}_${this.game.id}`,r=this.game.teams.find(t=>t.name==s),i={gameId:this.game.id,round:this.game.round,productId:a,trademark:this.trademark,model:this.name,available_from:this.available_from,available_till:this.available_till,material:this.material,manufacturing:this.manufacturing,design_type:this.design_type,design:this.design,variations:this.variations,advanced_feature:e,teamId:r.id,investments:this.investments,unit_cost:this.unit_cost,team:r};try{await this.$store.dispatch("addProduct",i),this.closeDialog()}catch(n){this.error=n.message}},closeDialog(){this.dialog=!1,this.calculating=!1,this.message="",this.error=""}},components:{Loader:x["default"]}},tt=Q,et=Object(N["a"])(tt,J,K,!1,null,null,null),at=et.exports,st={data(){return{headers:[{title:"Product",style:"text-left"},{title:"Available in (month)",style:"text-center"},{title:"Available to (month)",style:"text-center"},{title:"Status",style:"text-center"},{title:"Material",style:"text-center"},{title:"Manufacturing",style:"text-center"},{title:"Type of design",style:"text-center"},{title:"Design level",style:"text-center"},{title:"Model variations",style:"text-center"},{title:"Advanced feature",style:"text-center"},{title:"Unit cost",style:"text-center"},{title:"R&D investments",style:"text-center"},{title:"Action",style:"text-right"}],tab:0}},computed:{loading(){return this.$store.getters.loading},locale(){return this.$store.getters.locale},user(){return this.$store.getters.user},game(){return this.$store.getters.game},products(){return this.$store.getters.products},modelsByTrademark(){var t;const e=[];if((null===(t=this.products)||void 0===t?void 0:t.length)>0){e.push({trademarkId:this.products[0].trademarkId,trademark:this.products[0].trademark.name,models:[this.products[0]]});for(let t=1;t<this.products.length;t++){const a=e.find(e=>e.trademarkId===this.products[t].trademarkId);a?a.models.push(this.products[t]):e.push({trademarkId:this.products[t].trademarkId,trademark:this.products[t].trademark.name,models:[this.products[t]]})}}return e}},methods:{status(t){return t.available_till<12?"will be upgraded":t.available_from>1?"new model":"available"},stringMonth(t){return Object(T["c"])(t)},formatNumber(t){return Object(T["d"])(t,this.locale)}},components:{Loader:x["default"],AddModel:z,UpgradeModel:Y,DeleteProduct:G,AddBrand:at},async mounted(){if(null==this.products&&this.game&&this.user){const e=`${this.user.name}_${this.game.id}`,a=this.game.teams.find(t=>t.name==e),s={gameId:this.game.id,round:this.game.round,teamId:a.id};try{await this.$store.dispatch("fetchTeamProducts",s)}catch(t){await this.$store.dispatch("setError",t.message)}}}},rt=st,it=Object(N["a"])(rt,f,_,!1,null,null,null),nt=it.exports,ot=function(){var t,e=this,a=e._self._c;return a(s["a"],{attrs:{fluid:""}},[e.loading?a("div",{staticClass:"text-center"},[a("loader")],1):a("div",[a(i["a"],{staticClass:"my-2 subtitle-2 secondary--text pl-12"},[e._v(" Production sales ")]),a(i["a"],{staticClass:"subtitle-2 mx-8",attrs:{"no-gutters":""}},e._l(e.headers,(function(t,s){return a(u["a"],{key:s,staticClass:"tabCell",class:t.style},[e._v(" "+e._s(t.title)+" ")])})),1),null!==(t=e.products)&&void 0!==t&&t.length?a("div",[a(g["a"],{attrs:{focusable:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.modelsByTrademark,(function(t){return a(m["a"],{key:t.trademarkId},[a(v["a"],{staticClass:"font-weight-bold secondary--text"},[e._v(" "+e._s(t.trademark)+" ")]),a(p["a"],{staticClass:"body-2"},[e._l(t.models,(function(t){return a("div",{key:t.id},[a(i["a"],{attrs:{"no-gutters":""}},[a(u["a"],{staticClass:"text-left"},[e._v(e._s(t.model))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(e.status(t)))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(t.material))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(t.manufacturing))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(t.design_type))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(t.design))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(t.variations))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(t.advanced_feature))]),0==t.sales_plan?a(u["a"],{staticClass:"text-center error--text"},[e._v(" "+e._s(t.sales_plan)+" ")]):a(u["a"],{staticClass:"text-center secondary--text"},[e._v(e._s(e.localeNumber(t.sales_plan)))]),0==t.production_plan?a(u["a"],{staticClass:"text-center error--text"},[e._v(e._s(t.production_plan)+" ")]):a(u["a"],{staticClass:"text-center secondary--text"},[e._v(" "+e._s(e.localeNumber(t.production_plan))+" ")]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(t.unit_cost))]),0==t.retail_price?a(u["a"],{staticClass:"text-center error--text"},[e._v(" "+e._s(t.retail_price)+" ")]):a(u["a"],{staticClass:"text-center secondary--text"},[e._v(e._s(t.retail_price))]),0==t.price?a(u["a"],{staticClass:"text-center error--text"},[e._v(" "+e._s(t.price)+" ")]):a(u["a"],{staticClass:"text-center secondary--text"},[e._v(e._s(t.price))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(e.localeNumber(e.inventoriesBeginning(t))))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(e.localeNumber(e.inventoriesEnd(t))))]),a(u["a"],{staticClass:"text-right"},[a("edit-product",{attrs:{product:t}})],1)],1),a(r["a"])],1)})),a(i["a"],{staticClass:"font-weight-bold text-left mt-4",attrs:{"no-gutters":""}},[e._v(" Total sales (units): "+e._s(e.localeNumber(e.totalSales(t)))+" ")]),a(i["a"],{staticClass:"font-weight-bold text-left",attrs:{"no-gutters":""}},[e._v(" Sales value*, $: "+e._s(e.localeNumber(e.salesValue(t)))+" ")]),a(i["a"],{staticClass:"caption font-weight-bold text-left"},[e._v("* estimated")])],2)],1)})),1)],1):a(i["a"],{staticClass:"mt-8 px-4"},[e._v(" You havn't products yet! ")])],1)])},lt=[],ct=(a("13d5"),function(){var t=this,e=t._self._c;return e(C["a"],{attrs:{persistent:"","max-width":"500px","hide-overlay":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b["a"],t._g({staticClass:"text-lowercase",attrs:{color:"secondary",icon:""}},a),[e(P["a"],{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(B["a"],t._g({attrs:{small:""}},a),[t._v("mdi-lead-pencil")])]}}],null,!0)},[e("span",[t._v("add/edit sales")])])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?e("div",{staticClass:"text-center"},[e("loader")],1):e(y["a"],[e(j["a"]),e(k["c"],{staticClass:"subtitle-2 pt-6 text-pre-wrap"},[t._v(" Add sales of the "),e("span",{staticClass:"secondary--text"},[t._v(" "+t._s(t.product.trademark.name)+" "+t._s(t.product.model))])]),e(r["a"]),e(k["b"],{staticClass:"black--text"},[e(s["a"],{attrs:{"grid-list-md":""}},[e($["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(i["a"],[e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(O["a"],{attrs:{dense:"",color:"secondary",label:"unit cost",prefix:"$",name:"unit_cost",type:"text",readonly:""},model:{value:t.unit_cost,callback:function(e){t.unit_cost=t._n(e)},expression:"unit_cost"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(O["a"],{attrs:{dense:"",color:"secondary",label:"sales plan",suffix:"units",name:"salesPlan",type:"text",rules:[t.rules.number]},on:{change:function(e){return t.onceMore()}},model:{value:t.sales_plan,callback:function(e){t.sales_plan=t._n(e)},expression:"sales_plan"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(O["a"],{attrs:{dense:"",dirty:"",color:"secondary",label:"production plan",suffix:"units",hint:`not more than remaining of capasity: ${t.formatNumber(t.production_plan_hint)} units`,"persistent-hint":"",name:"productionPlan",type:"text",rules:[t.rules.number_hint]},on:{change:function(e){return t.onceMore()}},model:{value:t.production_plan,callback:function(e){t.production_plan=t._n(e)},expression:"production_plan"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(O["a"],{attrs:{dense:"",color:"secondary",label:"retail price",prefix:"$",name:"retailPrice",type:"text",rules:[t.rules.number]},on:{change:function(e){return t.onceMore()}},model:{value:t.retail_price,callback:function(e){t.retail_price=t._n(e)},expression:"retail_price"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(O["a"],{attrs:{dense:"",color:"secondary",label:"ex-works price",prefix:"$",name:"price",type:"text",rules:[t.rules.number]},on:{change:function(e){return t.onceMore()}},model:{value:t.price,callback:function(e){t.price=t._n(e)},expression:"price"}})],1)],1)],1)],1),t.error?e(i["a"],{staticClass:"mx-2 error--text",attrs:{justify:"center"}},[t._v("! "+t._s(t.error))]):t._e()],1),e(r["a"]),e(k["a"],[e(j["a"]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",disabled:t.loading||!t.valid||Boolean(t.error)},on:{click:t.changeModel}},[t._v(" Save ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:""},on:{click:t.closeDialog}},[t._v(" Close ")])],1)],1)],1)}),dt=[],ht={props:["product"],data(){return{dialog:!1,valid:!1,error:"",rules:{number:t=>!isNaN(parseFloat(t))&&t>=0||"it's expected number more than 0",number_hint:t=>!isNaN(parseFloat(t))&&t>=1&&t<=this.production_plan_hint||"it's expected number between 1 and "+this.production_plan_hint},trademark:this.product.trademark.name,name:this.product.model,id:this.product.id,unit_cost:this.product.unit_cost,sales_plan:this.product.sales_plan,production_plan:this.product.production_plan,retail_price:this.product.retail_price,price:this.product.price}},computed:{loading(){return this.$store.getters.loading},products(){return this.$store.getters.products},resources(){return this.$store.getters.resources_team},production_plan_hint(){var t,e;let a=0,s=0;return(null===(t=this.products)||void 0===t?void 0:t.length)>0&&(null===(e=this.resources)||void 0===e?void 0:e.length)>0&&(this.products.forEach(t=>{t.productId==this.product.productId?a+=this.production_plan:a+=t.production_plan}),s=this.resources[0].capacities),s-a}},methods:{formatNumber(t){return Object(T["d"])(t,this.locale)},onceMore(){this.error=""},async changeModel(){if(this.$refs.form.validate())if(this.sales_plan==this.product.sales_plan&&this.production_plan==this.product.production_plan&&this.retailPrice==this.product.retail_price&&this.price==this.product.price)this.error="No sales' parameter has been changed";else{const e={id:this.product.id,sales_plan:this.sales_plan,production_plan:this.production_plan,retail_price:this.retail_price,price:this.price};try{await this.$store.dispatch("editProduct",e)}catch(t){await this.$store.dispatch("setError",t.message)}this.closeDialog()}},closeDialog(){this.dialog=!1,this.error=""}},components:{Loader:x["default"]},async mounted(){var t,e;const a={gameId:this.product.gameId,round:this.product.round,teamId:this.product.teamId};if(null===(t=this.resources)||void 0===t||!t.length)try{await this.$store.dispatch("fetchTeamResources",a)}catch(s){await this.$store.dispatch("setError",s.message)}if(null===(e=this.products)||void 0===e||!e.length)try{await this.$store.dispatch("fetchTeamProducts",a)}catch(s){await this.$store.dispatch("setError",s.message)}}},ut=ht,mt=Object(N["a"])(ut,ct,dt,!1,null,null,null),pt=mt.exports,vt={data(){return{tab:0,headers:[{title:"Product",style:"text-left"},{title:"Available",style:"text-center"},{title:"Material",style:"text-center"},{title:"Manufacturing",style:"text-center"},{title:"Type of design",style:"text-center"},{title:"Design level",style:"text-center"},{title:"Model variations",style:"text-center"},{title:"Advanced feature",style:"text-center"},{title:"Sales plan (annual)",style:"text-center"},{title:"Production plan (annual)",style:"text-center"},{title:"Unit cost",style:"text-center"},{title:"Retail price",style:"text-center"},{title:"Ex-works price",style:"text-center"},{title:"Inventories (disposal volume beginning)",style:"text-center"},{title:"Inventories (disposal volume end)",style:"text-center"},{title:"Action",style:"text-right"}]}},computed:{loading(){return this.$store.getters.loading},locale(){return this.$store.getters.locale},user(){return this.$store.getters.user},game(){return this.$store.getters.game},products(){return this.$store.getters.products},modelsByTrademark(){const t=[];if(this.products.length>0){t.push({trademarkId:this.products[0].trademarkId,trademark:this.products[0].trademark.name,models:[this.products[0]]});for(let e=1;e<this.products.length;e++){const a=t.find(t=>t.trademarkId===this.products[e].trademarkId);a?a.models.push(this.products[e]):t.push({trademarkId:this.products[e].trademarkId,trademark:this.products[e].trademark.name,models:[this.products[e]]})}}return t},sales(){return this.$store.getters.sales_team}},methods:{localeNumber(t){return"ro-RO"==this.locale?t.toLocaleString("en-US"):t.toLocaleString(this.locale)},status(t){return t.available_till<12?"available till "+Object(T["c"])(t.available_till):t.available_from>1?"available from "+Object(T["c"])(t.available_from):"available"},totalSales(t){const e=t.models.reduce((t,e)=>t+e.sales_plan,0);return e},salesValue(t){const e=t.models.reduce((t,e)=>t+e.sales_plan*e.retail_price,0);return e.toLocaleString("en-US")},inventoriesBeginning(t){var e;let a=0;if((null===(e=this.sales)||void 0===e?void 0:e.length)>0){const e=this.sales.find(e=>e.productId==t.productId);e&&(a=e.inventories_beginning)}return a},inventoriesEnd(t){var e;let a=0;if((null===(e=this.sales)||void 0===e?void 0:e.length)>0){const e=this.sales.find(e=>e.productId==t.productId);e&&(a=e.inventories_end)}return a}},components:{Loader:x["default"],EditProduct:pt},async mounted(){if(null==this.products&&this.game&&this.user){const e=`${this.user.name}_${this.game.id}`,a=this.game.teams.find(t=>t.name==e),s={gameId:this.game.id,round:this.game.round,teamId:a.id};try{await this.$store.dispatch("fetchTeamProducts",s)}catch(t){await this.$store.dispatch("setError",t.message)}}if(this.game&&this.game.round>0&&null==this.sales){const e=`${this.user.name}_${this.game.id}`,a=this.game.teams.find(t=>t.name==e),s={gameId:this.game.id,round:this.game.round-1,teamId:a.id};try{await this.$store.dispatch("fetchTeamSales",s)}catch(t){await this.$store.dispatch("setError",t.message)}}}},gt=vt,ft=Object(N["a"])(gt,ot,lt,!1,null,null,null),_t=ft.exports,xt=function(){var t,e=this,a=e._self._c;return a(s["a"],{attrs:{fluid:""}},[e.loading?a("div",{staticClass:"text-center"},[a("loader")],1):a("div",[a(i["a"],{staticClass:"my-2 subtitle-2 secondary--text pl-12"},[e._v(" Resources ")]),a(i["a"],{staticClass:"subtitle-2",attrs:{"no-gutters":""}},e._l(e.headers,(function(t,s){return a(u["a"],{key:s,staticClass:"tabCell",class:t.style},[e._v(" "+e._s(t.title)+" ")])})),1),(null===(t=e.resources)||void 0===t?void 0:t.length)>0?a("div",[e._l(e.resources,(function(t){return a(i["a"],{key:t.id,attrs:{"no-gutters":""}},[a(u["a"],{staticClass:"text-left"},[e._v(e._s(e.formatNumber(t.capacities)))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(e.formatNumber(t.capacities_increase)))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(e.formatNumber(t.long_term_debt)))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(e.formatNumber(t.borrowings)))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(e.selializing(t.research_segments)))]),a(u["a"],{staticClass:"text-center"},[e._v(e._s(e.formatNumber(t.research_costs)))]),a(u["a"],{staticClass:"text-center"},[a("edit-resources",{attrs:{resource:t}})],1)],1)})),a(r["a"])],2):a(i["a"],{staticClass:"mt-8 px-4"},[e._v(" You haven't resources yet! ")])],1)])},bt=[],yt=function(){var t=this,e=t._self._c;return e(C["a"],{attrs:{persistent:"",scrollable:"","max-width":"600px","hide-overlay":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b["a"],t._g({staticClass:"text-lowercase",attrs:{color:"secondary",icon:""}},a),[e(P["a"],{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(B["a"],t._g({attrs:{small:""}},a),[t._v("mdi-lead-pencil")])]}}],null,!0)},[e("span",[t._v("add/edit resources")])])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?t._e():e(y["a"],[e(k["c"],{staticClass:"subtitle-2 pt-6"},[t._v(" Edit resources for the next round ")]),e(r["a"]),e(k["b"],{staticClass:"black--text"},[e(s["a"],{attrs:{"grid-list-md":""}},[e($["a"],{ref:"form",attrs:{validation:""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(i["a"],[e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(O["a"],{attrs:{dense:"",color:"secondary",label:"capacities current round*",value:t.formatNumber(t.capacities),suffix:"units",name:"capacities",type:"text",readonly:""}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(O["a"],{attrs:{dense:"",color:"secondary",label:"Capacities increase (to next round)",hint:"not more than "+t.formatNumber(this.capHint),suffix:"units",name:"capacities_increase",type:"text",rules:[t.rules.cap_hint]},on:{change:function(e){return t.onceMore()}},model:{value:t.capacities_increase,callback:function(e){t.capacities_increase=t._n(e)},expression:"capacities_increase"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(O["a"],{attrs:{dense:"",color:"secondary",label:"long-term debt*",prefix:"$",value:t.formatNumber(t.long_term_debt),name:"debt",type:"text",readonly:""}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(O["a"],{attrs:{dense:"",color:"secondary",label:"borrowings",prefix:"$",hint:"not more than $"+t.formatNumber(this.borrowHint),name:"borrowings",type:"text",rules:[t.rules.borrow_hint]},on:{change:function(e){return t.onceMore()}},model:{value:t.borrowings,callback:function(e){t.borrowings=t._n(e)},expression:"borrowings"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(w["a"],{attrs:{dense:"",multiple:"","return-object":"",items:t.market_segments,"item-text":"segment.name","item-value":"max_price",color:"secondary","item-color":"secondary",hint:"maximum 2 segments","persistent-hint":"",label:"segments",rules:[t.rules.max]},on:{change:function(e){return t.onceMore()}},model:{value:t.selected_segments,callback:function(e){t.selected_segments=e},expression:"selected_segments"}})],1)],1)],1)],1),e(i["a"],{staticClass:"ma-4 caption font-weight-bold"},[t._v("* you can't update this parameter")]),e(i["a"],{staticClass:"error--text",attrs:{justify:"center"}},[t._v(t._s(t.error))]),e(i["a"],{staticClass:"text-pre-wrap subtitle-2",attrs:{justify:"center"}},[t._v(" "+t._s(t.message)+" ")])],1),e(r["a"]),e(k["a"],[e(j["a"]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",disabled:!t.valid||Boolean(t.error)},on:{click:t.calculating}},[t._v(" Calculate ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",disabled:!t.calculate||Boolean(t.error)},on:{click:t.editResource}},[t._v("Save ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:""},on:{click:t.closeDialog}},[t._v(" Close ")])],1)],1)],1)},kt=[];function Ct(t){if(t.length>0){const e=t.reduce((t,e)=>t+e.max_price,0);return Object(T["e"])(17*e,2)}return 0}var $t={name:"EditResource",props:["resource"],data(){return{dialog:!1,valid:!1,error:"",message:"",calculate:!1,rules:{required:t=>!!t||"this field is required",number:t=>/^[+-]?[0-9]/.test(t)||"it's expected number",max:t=>t.length<=2||"max 2 expected",cap_hint:t=>!isNaN(parseFloat(t))&&t<=this.capHint||"it's expected number not more than "+this.capHint,borrow_hint:t=>!isNaN(parseFloat(t))&&t<=this.borrowHint||"it's expected number not more than "+this.borrowHint},selected_segments:[],capacities:this.resource.capacities,long_term_debt:this.resource.long_term_debt,capacities_increase:this.resource.capacities_increase,borrowings:this.resource.borrowings,research_costs:this.resource.research_costs}},computed:{loading(){return this.$store.getters.loading},locale(){return this.$store.getters.locale},market_segments(){return this.$store.getters.market_segments},finances(){return this.$store.getters.finances},borrowHint(){var t;let e=0;if((null===(t=this.finances)||void 0===t?void 0:t.length)>0){const t=this.finances[0].fixed_assets-this.finances[0].long_term_debt;e=Object(T["e"])(.7*t)}return e},capHint(){var t;let e=0;if((null===(t=this.finances)||void 0===t?void 0:t.length)>0){const t=this.finances[0].growth_finances+this.borrowings;e=Object(T["e"])(t/10)}return e}},methods:{formatNumber(t){return Object(T["d"])(t,this.locale)},onceMore(){this.error="",this.calculate=!1,this.message=""},calculating(){if(this.$refs.form.validate()){if(this.research_costs=Ct(this.selected_segments),this.capacities_increase==this.resource.capacities_increase&&this.borrowings==this.resource.borrowings&&this.research_costs==this.resource.research_costs)return this.error="No parameters of the resources have been changed";this.message=`Please, mention the figures:\n\t\t\t\t\t\tresearch cost = $${this.formatNumber(this.research_costs)}.\n\t\t\t\t\tif you agree, press the button Save, else - press Close`,this.calculate=!0}},async editResource(){if(this.$refs.form.validate()){const e={id:this.resource.id};this.capacities_increase!==this.resource.capacities_increase&&(e.capacities_increase=this.capacities_increase),this.borrowings!==this.resource.borrowings&&(e.borrowings=this.borrowings);const a=this.selected_segments.map(t=>t.segment.name);this.resource.research_costs!==this.research_costs&&(e.research_segments=a,e.research_costs=this.research_costs);try{await this.$store.dispatch("updateTeamResource",e),this.closeDialog()}catch(t){this.error=t.message,this.message="",this.$store.dispatch("setError",t.message)}}},closeDialog(){this.dialog=!1,this.error="",this.message="",this.calculate=!1,this.capacities=this.resource.capacities,this.capacities_increase=0,this.borrowings=0,this.invest_assets=0,this.interests=this.resource.interests,this.production_depreciation=this.resource.production_depreciation,this.long_term_debt=this.resource.long_term_debt,this.production_assets=this.resource.production_assets,this.research_costs=0,this.selected_segments=()=>{var t;const e=null===(t=this.resource.research_segments)||void 0===t?void 0:t.map(t=>{var e;const a=null===(e=this.market_segments)||void 0===e?void 0:e.find(e=>e.segment.name==t);let s=0;return a&&(s=a.max_price),{name:t,max_price:s}});return e}}},async mounted(){if(this.market_segments.length<1&&this.resource.round>0){const e={gameId:this.resource.gameId,round:this.resource.round-1};try{await this.$store.dispatch("fetchMarketSegments",e)}catch(t){await this.$store.dispatch("setError",t.message)}}if(this.finances.length<1&&this.resource.round>0){const e={gameId:this.resource.gameId,round:this.resource.round-1,teamId:this.resource.teamId};try{await this.$store.dispatch("fetchTeamFinances",e)}catch(t){await this.$store.dispatch("setError",t.message)}}}},wt=$t,jt=Object(N["a"])(wt,yt,kt,!1,null,null,null),Ot=jt.exports,It={data(){return{headers:[{title:"Capacities current round",style:"text-left"},{title:"Capacities increase for next round",style:"text-center"},{title:"Current long-term debt",style:"text-center"},{title:"Borrowings current round",style:"text-center"},{title:"Segments for research",style:"text-center"},{title:"Research costs",style:"text-center"},{title:"Action",style:"text-center"}]}},computed:{loading(){return this.$store.getters.loading},locale(){return this.$store.getters.locale},user(){return this.$store.getters.user},game(){return this.$store.getters.game},resources(){return this.$store.getters.resources_team}},methods:{formatNumber(t){return"ro-RO"==this.locale?t.toLocaleString("en-US"):t.toLocaleString(this.locale)},getValue(t){return this.values.find(e=>e.value===t).text},selializing(t){return t&&t.length?t.join(", "):""}},components:{Loader:x["default"],EditResources:Ot},async mounted(){if(null==this.resources&&this.game&&this.user){var t;const a=`${this.user.name}_${this.game.id}`,s=null===(t=this.game.teams)||void 0===t?void 0:t.find(t=>t.name==a),r={gameId:this.game.id,round:this.game.round,teamId:s.id};try{await this.$store.dispatch("fetchTeamResources",r)}catch(e){await this.$store.dispatch("setError",e.message)}}}},St=It,At=Object(N["a"])(St,xt,bt,!1,null,null,null),Tt=At.exports,Mt=function(){var t,e,a,n,o=this,l=o._self._c;return l(s["a"],{attrs:{fluid:""}},[o.loading?l("div",{staticClass:"text-center"},[l("loader")],1):l("div",[l(i["a"],{staticClass:"my-2 subtitle-2 secondary--text pl-12"},[o._v(" Retail ")]),l(i["a"],{staticClass:"subtitle-2 mx-8",attrs:{"no-gutters":""}},[l(u["a"],{staticClass:"tabCell text-left"},[o._v("Available channels")]),o._l(o.headers,(function(t){return l(u["a"],{key:t,staticClass:"tabCell"},[o._v(o._s(t)+" ")])}))],2),l(g["a"],{attrs:{focusable:""},model:{value:o.panel,callback:function(t){o.panel=t},expression:"panel"}},[l(m["a"],[l(v["a"],{staticClass:"subtitle-2 secondary--text"},[o._v(" Self-operated & franchise retail channels ")]),l(p["a"],{staticClass:"body-2"},[(null===(t=o.onlineStores)||void 0===t?void 0:t.length)>0?l("div",[l("div",{staticClass:"secondary--text my-4 text-left"},[o._v("Online self-operated stores")]),o._l(o.onlineStores,(function(t){return l("div",{key:t.id},[l(i["a"],{attrs:{"no-gutters":""}},[l(u["a"],{staticClass:"text-left"},[o._v(o._s(t.name))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.channelTrademarks(t)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(t.stores))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.peak_market_coverage)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.investment_costs)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.sales_last)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.operational_costs)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.franchise_cost)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.franchise_fee)))]),l(u["a"],[l("change-channel",{attrs:{channel:t}}),l("delete-channel",{attrs:{channel:t}})],1)],1),l(r["a"])],1)}))],2):o._e(),null!==(e=o.outlets)&&void 0!==e&&e.length?l("div",[l("div",{staticClass:"secondary--text my-4 text-left"},[o._v(" Brick&mortar self-operated stores ")]),o._l(o.outlets,(function(t){return l("div",{key:t.id},[l(i["a"],{attrs:{"no-gutters":""}},[l(u["a"],{staticClass:"text-left"},[o._v(o._s(t.name))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.channelTrademarks(t)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(t.stores))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.peak_market_coverage)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.investment_costs)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.sales_last)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.operational_costs)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.franchise_cost)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.franchise_fee)))]),l(u["a"],[l("change-channel",{attrs:{channel:t}}),l("delete-channel",{attrs:{channel:t}})],1)],1),l(r["a"])],1)}))],2):o._e(),null!==(a=o.franchises)&&void 0!==a&&a.length?l("div",[l("div",{staticClass:"secondary--text my-4 text-left"},[o._v(" Franchise stores ")]),o._l(o.franchises,(function(t){return l("div",{key:t.id},[l(i["a"],{attrs:{"no-gutters":""}},[l(u["a"],{staticClass:"text-left"},[o._v(o._s(t.name))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.channelTrademarks(t)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(t.stores))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.peak_market_coverage)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.investment_costs)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.sales_last)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.operational_costs)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.franchise_cost)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.franchise_fee)))]),l(u["a"],[l("change-franchise",{attrs:{channel:t}}),l("delete-channel",{attrs:{channel:t}})],1)],1),l(r["a"])],1)}))],2):o._e()])],1)],1),l("div",{staticClass:"caption font-weight-bold text-left"},[o._v("* for franchises only")]),l(i["a"],{staticClass:"my-4 mx-8",attrs:{justify:"start"}},[l("add-channel"),l("sell-franchise",{attrs:{outlets:o.outlets}})],1),l(r["a"]),l(i["a"],{staticClass:"subtitle-2 mx-6",attrs:{"no-gutters":""}},[l(u["a"],{staticClass:"tabCell text-left"},[o._v("Chain name")]),o._l(o.headers2,(function(t){return l(u["a"],{key:t,staticClass:"tabCell text-center"},[o._v(" "+o._s(t)+" ")])})),l(u["a"],{staticClass:"tabCell text-right"},[o._v("actions")])],2),l(r["a"]),l(g["a"],{staticClass:"mb-12",attrs:{focusable:""},model:{value:o.panel2,callback:function(t){o.panel2=t},expression:"panel2"}},[l(m["a"],[l(v["a"],{staticClass:"subtitle-2 secondary--text"},[o._v(" Independent retail chains ")]),l(p["a"],{staticClass:"body-2"},[null!==(n=o.marketplaces)&&void 0!==n&&n.length?l("div",[l("div",{staticClass:"secondary--text my-4 text-left"},[o._v(" Marketplaces ")]),o._l(o.marketplaces,(function(t){return l("div",{key:t.id},[l(i["a"],{attrs:{"no-gutters":""}},[l(u["a"],{staticClass:"text-left"},[o._v(o._s(t.name))]),l(u["a"],{staticClass:"text-center primary--text font-weight-bold"},[o._v(" "+o._s(o.status(t))+" ")]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(t.stores))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.peak_market_coverage)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.lastSales(t)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.entry_fee)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.annual_fee)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(100*t.retail_margin)+"%")]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(t.min_price))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(t.max_price))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(t.num_trademarks))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(t.design_main)+" / "+o._s(t.design_second))]),"registered"==o.status(t)?l(u["a"],[l("change",{attrs:{chain:t,channel:o.getChannel(t)}}),l("suspend",{attrs:{channel:o.getChannel(t)}})],1):l(u["a"],[l("register",{attrs:{channel:t}})],1)],1),l(r["a"])],1)}))],2):o._e(),o.bm_chains.length?l("div",[l("div",{staticClass:"secondary--text my-4 text-left"},[o._v(" Brick&mortar multibrands chains ")]),o._l(o.bm_chains,(function(t){return l("div",{key:t.id},[l(i["a"],{attrs:{"no-gutters":""}},[l(u["a"],{staticClass:"text-left"},[o._v(o._s(t.name))]),l(u["a"],{staticClass:"text-center primary--text font-weight-bold"},[o._v(" "+o._s(o.status(t))+" ")]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(t.stores))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.peak_market_coverage)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.lastSales(t)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.entry_fee)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(o.formatNumber(t.annual_fee)))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(100*t.retail_margin)+"%")]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(t.min_price))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(t.max_price))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(t.num_trademarks))]),l(u["a"],{staticClass:"text-center"},[o._v(o._s(t.design_main)+" / "+o._s(t.design_second))]),"registered"==o.status(t)?l(u["a"],[l("change",{attrs:{chain:t,channel:o.getChannel(t)}}),l("suspend",{attrs:{channel:o.getChannel(t)}})],1):l(u["a"],[l("register",{attrs:{channel:t}})],1)],1),l(r["a"])],1)}))],2):o._e()])],1)],1)],1)])},Et=[],Nt=function(){var t=this,e=t._self._c;return e(C["a"],{attrs:{persistent:"","max-width":"600px","hide-overlay":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b["a"],t._g({staticClass:"text-lowercase mr-8",attrs:{color:"secondary",dark:"",small:""}},a),[t._v(" add channel ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?e("div",{staticClass:"text-center"},[e("loader")],1):e(y["a"],[e(k["c"],{staticClass:"subtitle-2 pt-6"},[t._v(" New chanel parameters ")]),e(r["a"]),e(k["b"],{staticClass:"black--text"},[e(s["a"],{attrs:{"grid-list-md":""}},[e($["a"],{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){t.preventDefault()}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(i["a"],[e(u["a"],{attrs:{cols:"12",md:"8",sm:"6"}},[e(w["a"],{attrs:{dense:"",color:"secondary",items:t.types,"tem-text":"text","item-value":"value","item-color":"secondary",label:"channel type",rules:[t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),e(u["a"],{attrs:{cols:"12",md:"8",sm:"6"}},[e(w["a"],{attrs:{dense:"",multiple:t.multiple,items:t.teamTrademarks,"item-text":"name","item-value":"name",color:"secondary","item-color":"secondary",label:"trademarks",rules:[t.rules.not_empty]},on:{change:function(e){return t.onceMore()}},model:{value:t.trademark,callback:function(e){t.trademark=e},expression:"trademark"}})],1),e(u["a"],{attrs:{cols:"12",md:"4",sm:"6"}},[e(O["a"],{attrs:{dense:"",color:"secondary",label:"stores",name:"stores",type:"text",readonly:t.readonly,rules:[t.rules.number]},on:{change:function(e){return t.onceMore()}},model:{value:t.stores,callback:function(e){t.stores=t._n(e)},expression:"stores"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"8"}},[e(O["a"],{attrs:{dense:"",color:"secondary",label:"channel name",name:"name",readonly:"",type:"text",rules:[t.rules.required]},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1)],1)],1),t.error?e(i["a"],{staticClass:"mx-2 error--text",attrs:{justify:"center"}},[t._v("! "+t._s(t.error))]):t._e(),e(i["a"],{staticClass:"text-center text-pre-wrap mx-2",attrs:{justify:"center"}},[t._v(t._s(t.message))])],1),e(r["a"]),e(k["a"],[e(j["a"]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",disabled:!t.valid||Boolean(t.error)},on:{click:t.calculate}},[t._v(" Calculate ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",disabled:!t.calculating||Boolean(t.error)},on:{click:t.addChannel}},[t._v(" Save ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:""},on:{click:t.closeDialog}},[t._v(" Close ")])],1)],1)],1)},Dt=[],zt=a("f3ca"),Bt={data(){return{dialog:!1,valid:!1,message:"",error:"",calculating:!1,rules:{required:t=>!!t||"this field is required",number:t=>/^[+]?[0-9]/.test(t)||"it's expected number",not_empty:t=>t.length>0||"select min 1 item"},stores:1,type:null,trademark:[],investments:null,operational:null}},computed:{loading(){return this.$store.getters.loading},locale(){return this.$store.getters.locale},user(){return this.$store.getters.user},game(){return this.$store.getters.game},team(){return this.$store.getters.team},trademarks(){return this.$store.getters.trademarks},channels(){return this.$store.getters.channels},readonly(){return parseInt(this.type)<3},teamTrademarks(){let t=[];if(this.team){var e;const a=[];null===(e=this.team)||void 0===e||e.products.map(t=>{const e=a.find(e=>e===t.trademarkId);e||a.push(t.trademarkId)}),t=this.trademarks.filter(t=>-1!==a.indexOf(t.id))}return t},name(){var t;let e="";if(this.team&&this.type&&null!==(t=this.trademark)&&void 0!==t&&t.length)switch(this.type){case 1:e=this.team.name.split("_")[0]+" online store";break;case 2:e=this.team.name.split("_")[0]+" brick&mortar store";break;case 3:e=this.trademark+" brick&mortar store"}return e},multiple(){return 3!=this.type},types(){var t,e,a;const s=[];return null!==(t=this.channels)&&void 0!==t&&t.find(t=>1==t.type)||s.push({text:"team self operates online store",value:1}),null!==(e=this.channels)&&void 0!==e&&e.find(t=>2==t.type)||s.push({text:"team self operates brick&mortar channel",value:2}),null!==(a=this.channels)&&void 0!==a&&a.find(t=>3==t.type)||s.push({text:"trademark operates brick&mortar channel",value:3}),s}},watch:{type(){this.trademark=[]}},methods:{onceMore(){this.calculating=!1,this.message="",this.error=""},calculate(){this.$refs.form.validate()&&(this.investments=Object(zt["b"])(this.type,this.stores),this.operational=Object(zt["a"])(this.type,this.stores),this.message=`\n\t\t\t\tPlease, mention the figures:\n            \t\tinvestment costs = ${Object(T["d"])(this.investments,this.locale)}\n\t\t\t\t\toperational cost = ${Object(T["d"])(this.operational,this.locale)}\n                    if you agree, press the button Save`,this.calculating=!0)},async addChannel(){let t=[];"string"==typeof this.trademark?t.push(this.trademark):t=this.trademark;const e={gameId:this.game.id,round:this.game.round,register_round:this.game.round,teamId:this.team.id,name:this.name,stores:this.stores,type:this.type,investment_costs:this.investments,operational_costs:this.operational,trademarks:t,team:this.team};await this.$store.dispatch("addChannel",e),this.closeDialog()},closeDialog(){this.dialog=!1,this.calculating=!1,this.message="",this.error=""}},components:{Loader:x["default"]},async mounted(){if(!this.team&&this.game&&this.user){const e=`${this.user.name}_${this.game.id}`,a=this.game.teams.find(t=>t.name==e);try{await this.$store.dispatch("fetchTeam",a.id)}catch(t){await this.$store.dispatch("setError",t.message)}}if(this.trademarks.length<1)try{await this.$store.dispatch("fetchTrademarks")}catch(t){await this.$store.dispatch("setError",t.message)}}},Pt=Bt,qt=Object(N["a"])(Pt,Nt,Dt,!1,null,null,null),Lt=qt.exports,Rt=function(){var t=this,e=t._self._c;return e(C["a"],{attrs:{"max-width":"450px","hide-overlay":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b["a"],t._g({attrs:{color:"secondary",icon:""}},a),[e(P["a"],{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(B["a"],t._g({attrs:{small:""}},a),[t._v("mdi-delete")])]}}],null,!0)},[e("span",[t._v("delete channel")])])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?e("div",{staticClass:"text-center"},[e("loader")],1):e(y["a"],[e(r["a"]),e(k["c"],{staticClass:"subtitle-2 pt-6 text-pre-wrap"},[t._v(" Do you really want to delete the channel "),e("span",{staticClass:"secondary--text"},[t._v(t._s(this.channel.name))]),t._v(" ? ")]),e(r["a"]),e(k["a"],[e(j["a"]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"error",text:""},on:{click:t.deleteChannel}},[t._v(" Yes ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:""},on:{click:t.closeDialog}},[t._v(" No ")])],1)],1)],1)},Ft=[],Ut=(a("d9e2"),{props:["channel"],data(){return{dialog:!1}},computed:{loading(){return this.$store.getters.loading},intermediary(){return this.$store.getters.intermediary}},methods:{async deleteChannel(){if(this.channel.round!==this.channel.register_round){const t=Object(zt["b"])(this.channel.type,this.channel.stores),e={id:this.intermediary.id,retail_writte_off:this.intermediary.retail_writte_off+t};await this.$store.dispatch("updateIntermediary",e)}await this.$store.dispatch("deleteChannel",this.channel.id),this.closeDialog()},closeDialog(){this.dialog=!1}},async mounted(){if(this.channel.round!==this.channel.register_round&&!this.intermediary&&this.channel){const e={gameId:this.channel.gameId,round:this.channel.round,teamId:this.channel.teamId};try{await this.$store.dispatch("fetchTeamIntermediary",e)}catch(t){throw new Error(t.message)}}},components:{Loader:x["default"]}}),Yt=Ut,Ht=Object(N["a"])(Yt,Rt,Ft,!1,null,null,null),Wt=Ht.exports,Vt=function(){var t=this,e=t._self._c;return e(C["a"],{attrs:{persistent:"","max-width":"600px","hide-overlay":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b["a"],t._g({staticClass:"text-lowercase",attrs:{color:"secondary",icon:""}},a),[e(P["a"],{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(B["a"],t._g({attrs:{small:""}},a),[t._v("mdi-lead-pencil")])]}}],null,!0)},[e("span",[t._v("edit channel")])])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?e("div",{staticClass:"text-center"},[e("loader")],1):e(y["a"],[e(k["c"],{staticClass:"subtitle-2 pt-6 text-pre-wrap"},[t._v(" Change parameters of the "),e("span",{staticClass:"secondary--text"},[t._v(t._s(t.name))]),t._v(" channel ")]),e(r["a"]),e(k["b"],{staticClass:"black--text"},[e(s["a"],{attrs:{"grid-list-md":""}},[e($["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(i["a"],[e(u["a"],{attrs:{cols:"12",sm:"12",md:"12"}},[e(w["a"],{attrs:{dense:"",items:t.teamTrademarks,"item-text":"name","item-value":"name",multiple:"",color:"secondary","item-color":"secondary",label:"trademarks",rules:[t.rules.required]},on:{change:t.onceMore},model:{value:t.trademark,callback:function(e){t.trademark=e},expression:"trademark"}})],1),e(u["a"],{attrs:{cols:"12",sm:"3",md:"3"}},[e(O["a"],{attrs:{color:"secondary",label:"stores",name:"stores",type:"text",rules:[t.rules.number],readonly:t.readonly},on:{change:function(e){return t.onceMore()}},model:{value:t.stores,callback:function(e){t.stores=t._n(e)},expression:"stores"}})],1)],1)],1)],1),t.error?e(i["a"],{staticClass:"mx-2 error--text",attrs:{justify:"center"}},[t._v("! "+t._s(t.error))]):t._e(),e(i["a"],{staticClass:"text-center text-pre-wrap mx-2",attrs:{justify:"center"}},[t._v(t._s(t.message))])],1),e(r["a"]),e(k["a"],[e(j["a"]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",disabled:!t.valid},on:{click:t.calculate}},[t._v("Calculate")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",disabled:!t.calculating||Boolean(t.error)},on:{click:t.changeChannel}},[t._v(" Upgrade ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:""},on:{click:t.closeDialog}},[t._v(" Close ")])],1)],1)],1)},Zt=[],Xt={props:["channel"],data(){return{dialog:!1,valid:!1,message:"",error:"",calculating:!1,rules:{required:t=>t&&t.length>0||"required field",number:t=>!isNaN(parseFloat(t))&&t>=1&&t<=999||"it's expected number between 1 and 999"},stores:this.channel.stores,trademark:this.channel.trademarks,name:this.channel.name,operational:0,investments:0,toAdd:[],toRemove:[]}},computed:{loading(){return this.$store.getters.loading},locale(){return this.$store.getters.locale},readonly(){return 1==this.channel.type},trademarks(){return this.$store.getters.trademarks},team(){return this.$store.getters.team},teamTrademarks(){let t=[];if(this.team){var e,a;const s=[];null===(e=this.team)||void 0===e||e.products.map(t=>{const e=s.find(e=>e===t.trademarkId);e||s.push(t.trademarkId)}),t=null===(a=this.trademarks)||void 0===a?void 0:a.filter(t=>-1!==s.indexOf(t.id))}return t}},methods:{calculate(){if(this.$refs.form.validate()){if(this.stores===this.channel.stores&&this.trademark.length==this.channel.trademarks.length)return this.error="No parameters of the channel have been changed";const t=this.stores-this.channel.stores;if(0!==t&&(this.investments=Object(zt["b"])(this.channel.type,t),this.operational=Object(zt["a"])(this.channel.type,this.stores),this.message=this.message=`\n\t\t\t\t\t\tPlease, mention the figures:\n\t\t\t\t\t\tadditional investment costs = ${Object(T["d"])(this.investments,this.locale)}\n\t\t\t\t\t\toperational cost = ${Object(T["d"])(this.operational,this.locale)}\n\t\t\t\t\t\tif you agree, press the button Upgrade`),!this.error&&0==t){const t=this.trademark,e=this.channel.trademarks;if((null===t||void 0===t?void 0:t.length)>(null===e||void 0===e?void 0:e.length)){t.forEach(t=>{const a=null===e||void 0===e?void 0:e.find(e=>e.name==t);a||this.toAdd.push(t)});const a=this.toAdd.join(" ");this.message=`In these circumstances you have not an additional investment\n\t\t\t\t\t\t\tif you want to add to the channel trademark(s): ${a},\n\t\t\t\t\t\t\tpress button Upgrade`}else{null===e||void 0===e||e.forEach(e=>{const a=null===t||void 0===t?void 0:t.find(t=>t==e.name);a||this.toRemove.push(e.name)});const a=this.toRemove.join(", ");this.message=`In these circumstances you have not an additional investment\n\t\t\t\t\t\t\tif you want to remove from the channel trademark(s): ${a},\n\t\t\t\t\t\t\tpress button Upgrade`}}this.calculating=!0}},onceMore(){this.error="",this.message="",this.calculating=!1},async changeChannel(){var t,e;if(this.stores!==this.channel.stores){const t={id:this.channel.id,stores:this.stores,investment_costs:this.channel.investment_costs+this.investments,operational_costs:this.operational};await this.$store.dispatch("editChannel",t)}if(this.toRemove.length>0)null===(e=this.toRemove)||void 0===e||e.forEach(async t=>{this.removeTrademark(encodeURIComponent(t))});else if((null===(t=this.toAdd)||void 0===t?void 0:t.length)>0){var a;null===(a=this.toAdd)||void 0===a||a.forEach(t=>{this.addTrademarktoChannel(t)})}this.closeDialog()},async addTrademarktoChannel(t){const e={channelId:this.channel.id,trademark:t};await this.$store.dispatch("addTrademarkToChannel",e)},async removeTrademark(t){const e={channelId:this.channel.id,trademark:t};await this.$store.dispatch("removeTrademarkFromChannel",e)},closeDialog(){this.dialog=!1,this.error="",this.message="",this.calculating=!1,this.stores=this.channel.stores,this.trademark=this.channel.trademarks,this.valid=!1}},components:{Loader:x["default"]},async mounted(){var t,e;if((null===(t=this.trademarks)||void 0===t?void 0:t.length)<1)try{await this.$store.dispatch("fetchTrademarks")}catch(a){await this.$store.dispatch("setError",a.message)}if(!this.team&&null!==(e=this.channel)&&void 0!==e&&e.teamId)try{await this.$store.dispatch("fetchTeam",this.channel.teamId)}catch(a){await this.$store.dispatch("setError",a.message)}}},Gt=Xt,Jt=Object(N["a"])(Gt,Vt,Zt,!1,null,null,null),Kt=Jt.exports,Qt=function(){var t=this,e=t._self._c;return e(C["a"],{attrs:{persistent:"","max-width":"450px","hide-overlay":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b["a"],t._g({staticClass:"text-lowercase",attrs:{color:"secondary",dark:"",small:""}},a),[t._v(" sell franchise ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?e("div",{staticClass:"text-center"},[e("loader")],1):e(y["a"],[e(k["c"],{staticClass:"subtitle-2 pt-6 text-pre-wrap"},[t._v(" Set the parameters for selling the franchise ")]),e(r["a"]),e(k["b"],{staticClass:"black--text"},[e(s["a"],{attrs:{"grid-list":""}},[t.canSelling?e("div",[e($["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(i["a"],[e(u["a"],{attrs:{cols:"12",sm:"12",md:"12"}},[e(w["a"],{attrs:{dense:"",items:t.items,"item-text":"name",attach:"",color:"secondary","item-color":"secondary",label:"select franchise",rules:[t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(O["a"],{attrs:{color:"secondary",label:"franchise cost",name:"franchiseCost",type:"text",rules:[t.rules.number]},on:{change:t.onceMore},model:{value:t.franchise_cost,callback:function(e){t.franchise_cost=t._n(e)},expression:"franchise_cost"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(O["a"],{attrs:{color:"secondary",label:"franchise fee",name:"franchiseFee",type:"text",rules:[t.rules.number]},on:{change:t.onceMore},model:{value:t.franchise_fee,callback:function(e){t.franchise_fee=t._n(e)},expression:"franchise_fee"}})],1)],1)],1)],1):e(i["a"],{staticClass:"text-center mx-2",attrs:{justify:"center"}},[t._v(" You can't sell the franchise this year ")])],1),t.error?e(i["a"],{staticClass:"mx-2 error--text",attrs:{justify:"center"}},[t._v("! "+t._s(t.error))]):t._e()],1),e(k["a"],[e(j["a"]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",disabled:!t.valid||!t.canSelling||Boolean(t.error)},on:{click:t.addChannel}},[t._v(" Confirm ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:""},on:{click:t.closeDialog}},[t._v(" Decline ")])],1)],1)],1)},te=[],ee={props:["outlets"],data(){return{dialog:!1,valid:!1,error:"",rules:{required:t=>t&&t.length>0||"required field",number:t=>!isNaN(parseFloat(t))&&t>=0||"it's expected number more than 0"},name:"",franchise_cost:0,franchise_fee:0}},computed:{loading(){return this.$store.getters.loading},canSelling(){const t=this.outlets.filter(t=>t.sales_last>0);return Boolean(this.outlets.length>0&&t.length>0)},channels(){return this.$store.getters.channels},items(){const t=[];return this.outlets.forEach(e=>{e.trademarks.map(e=>{const a=this.channels.find(t=>4==t.type&&t.name.split(" ")[0]==e.name);a||t.push({name:e.name+" franchise",trademark:[e.name]})})}),t}},methods:{onceMore(){this.error=""},async addChannel(){if(this.$refs.form.validate()){const t=this.items.find(t=>t.name===this.name),e={gameId:this.outlets[0].gameId,round:this.outlets[0].round,register_round:this.outlets[0].round,teamId:this.outlets[0].teamId,name:this.name,type:4,stores:0,franchise_cost:this.franchise_cost,franchise_fee:this.franchise_fee,trademarks:t.trademark,investment_costs:0,operational_costs:0,team:this.outlets[0].team};await this.$store.dispatch("addChannel",e),this.closeDialog()}else this.error="Enter all params correctly, please"},closeDialog(){this.dialog=!1,this.error=""}},components:{Loader:x["default"]}},ae=ee,se=Object(N["a"])(ae,Qt,te,!1,null,null,null),re=se.exports,ie=function(){var t=this,e=t._self._c;return e(C["a"],{attrs:{"max-width":"500px","hide-overlay":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b["a"],t._g({staticClass:"text-lowercase",attrs:{color:"secondary",icon:""}},a),[e(P["a"],{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(B["a"],t._g({attrs:{small:""}},a),[t._v("mdi-lead-pencil")])]}}],null,!0)},[e("span",[t._v("edit franchise")])])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?e("div",{staticClass:"text-center"},[e("loader")],1):e(y["a"],[e(k["c"],{staticClass:"subtitle-2 pt-6 text-pre-wrap"},[t._v(" Change parameters of the "),e("span",{staticClass:"secondary--text"},[t._v(t._s(t.channel.name))])]),e(k["b"],{staticClass:"black--text"},[e(s["a"],{attrs:{"grid-list":""}},[e($["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(i["a"],[e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(O["a"],{attrs:{color:"secondary",label:"franchise cost",name:"franchiseCost",type:"text",rules:[t.rules.number]},on:{change:t.onceMore},model:{value:t.franchise_cost,callback:function(e){t.franchise_cost=t._n(e)},expression:"franchise_cost"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(O["a"],{attrs:{color:"secondary",label:"franchise fee",name:"franchiseFee",type:"text",rules:[t.rules.number]},on:{change:t.onceMore},model:{value:t.franchise_fee,callback:function(e){t.franchise_fee=t._n(e)},expression:"franchise_fee"}})],1)],1)],1)],1),t.error?e(i["a"],{staticClass:"mx-2 error--text",attrs:{justify:"center"}},[t._v("! "+t._s(t.error))]):t._e()],1),e(r["a"]),e(k["a"],[e(j["a"]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",disabled:t.loading||Boolean(t.error)||!t.change},on:{click:t.changeChannel}},[t._v(" Confirm ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:""},on:{click:t.closeDialog}},[t._v(" Decline ")])],1)],1)],1)},ne=[],oe={props:["channel"],data(){return{dialog:!1,valid:!1,error:"",change:!1,rules:{number:t=>!isNaN(parseFloat(t))&&t>=0||"it's expected number more than 0"},franchise_cost:this.channel.franchise_cost,franchise_fee:this.channel.franchise_fee}},computed:{loading(){return this.$store.getters.loading}},methods:{onceMore(){this.error="",this.change=!0},async changeChannel(){if(this.$refs.form.validate()){if(this.channel.franchise_cost===this.franchise_cost&&this.channel.franchise_fee===this.franchise_fee)return this.error="No parameters of the franchise have been changed";const e={id:this.channel.id,franchise_cost:this.franchise_cost,franchise_fee:this.franchise_fee,investment_costs:0,operational_costs:0,stores:0};try{await this.$store.dispatch("editChannel",e),this.closeDialog()}catch(t){this.error=t.message}}},closeDialog(){this.dialog=!1,this.error="",this.change=!1}},components:{Loader:x["default"]}},le=oe,ce=Object(N["a"])(le,ie,ne,!1,null,null,null),de=ce.exports,he=function(){var t=this,e=t._self._c;return e(C["a"],{attrs:{persistent:"","max-width":"500px","hide-overlay":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b["a"],t._g({staticClass:"text-lowercase",attrs:{color:"secondary",icon:""}},a),[e(P["a"],{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(B["a"],t._g({attrs:{small:""}},a),[t._v(" mdi-cart-plus ")])]}}],null,!0)},[e("span",[t._v("register in chain")])])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?e("div",{staticClass:"text-center"},[e("loader")],1):e(y["a"],[e(j["a"]),e(k["c"],{staticClass:"subtitle-2 pt-6 text-pre-wrap"},[t._v(" Registration in the "),e("span",{staticClass:"secondary--text"},[t._v(t._s(t.channel.name))])]),e(r["a"]),e(k["b"],{staticClass:"black--text"},[e(s["a"],{attrs:{"grid-list-md":""}},[e($["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(i["a"],[e(u["a"],{attrs:{cols:"12",sm:"12",md:"12"}},[e(w["a"],{attrs:{dense:"",items:t.teamTrademarks,"item-text":"name",multiple:"",color:"secondary","item-color":"secondary",label:"trademarks",rules:[t.rules.not_empty]},on:{change:function(e){return t.onceMore()}},model:{value:t.trademark,callback:function(e){t.trademark=e},expression:"trademark"}})],1)],1)],1)],1),t.error?e(i["a"],{staticClass:"mx-2 error--text",attrs:{justify:"center"}},[t._v("! "+t._s(t.error))]):t._e(),e(i["a"],{staticClass:"text-center text-pre-wrap mx-2",attrs:{justify:"center"}},[t._v(t._s(t.message))])],1),e(r["a"]),e(k["a"],[e(j["a"]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",disabled:!t.valid||Boolean(t.error)},on:{click:t.calculate}},[t._v(" Calculate ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",disabled:!t.changed||Boolean(t.error)},on:{click:t.addChannel}},[t._v(" Confirm ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:""},on:{click:t.closeDialog}},[t._v(" Decline ")])],1)],1)],1)},ue=[],me={props:["channel"],data(){return{dialog:!1,valid:!1,changed:!1,error:"",message:"",rules:{not_empty:t=>t.length>0||"select min 1 item"},trademark:[],investments:null,operational:null,stores:this.channel.stores}},computed:{loading(){return this.$store.getters.loading},locale(){return this.$store.getters.locale},user(){return this.$store.getters.user},game(){return this.$store.getters.game},team(){return this.$store.getters.team},trademarks(){return this.$store.getters.trademarks},teamTrademarks(){let t=[];if(this.team){var e;const a=[];null===(e=this.team)||void 0===e||e.products.map(t=>{const e=a.find(e=>e===t.trademarkId);e||a.push(t.trademarkId)}),t=this.trademarks.filter(t=>-1!==a.indexOf(t.id))}return t}},methods:{onceMore(){this.error="",this.changed=!1,this.message=""},calculate(){if(this.$refs.form.validate()){const t=this.trademark.length;this.investments=this.channel.entry_fee*t,this.operational=this.channel.annual_fee*t,this.message=`Please, mention the figures:\n            \t\tinvestment costs = ${Object(T["d"])(this.investments,this.locale)}\n\t\t\t\t\toperational cost = ${Object(T["d"])(this.operational,this.locale)}\n                    if you agree, press the button Confirm`,this.changed=!0}},async addChannel(){if(this.trademark.length>0){let e="brick&mortar"===this.channel.type?8:7;console.log(this.trademark);const a={gameId:this.game.id,round:this.game.round,register_round:this.game.round,teamId:this.team.id,name:this.channel.name,stores:this.stores,type:e,investment_costs:this.investments,operational_costs:this.operational,trademarks:this.trademark,num_trademarks:this.channel.num_trademarks,team:this.team};console.log(a);try{await this.$store.dispatch("addChannel",a),this.closeDialog()}catch(t){this.error=t.message}}else this.error="Define trademarks you want to register in the chain"},closeDialog(){this.dialog=!1,this.error="",this.changed=!1,this.message=""}},components:{Loader:x["default"]},async mounted(){if(!this.team&&this.game&&this.user){const e=`${this.user.name}_${this.game.id}`,a=this.game.teams.find(t=>t.name==e);try{await this.$store.dispatch("fetchTeam",a.id)}catch(t){await this.$store.dispatch("setError",t.message)}}if(this.trademarks.length<1)try{await this.$store.dispatch("fetchTrademarks")}catch(t){await this.$store.dispatch("setError",t.message)}}},pe=me,ve=Object(N["a"])(pe,he,ue,!1,null,null,null),ge=ve.exports,fe=function(){var t=this,e=t._self._c;return e(C["a"],{attrs:{"max-width":"450px","hide-overlay":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b["a"],t._g({staticClass:"text-lowercase",attrs:{color:"secondary",icon:""}},a),[e(P["a"],{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(B["a"],t._g({attrs:{small:""}},a),[t._v("mdi-cart-off")])]}}],null,!0)},[e("span",[t._v("suspend from chain")])])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?e("div",{staticClass:"text-center"},[e("loader")],1):e(y["a"],[e(k["c"],{staticClass:"subtitle-2 pt-6 text-pre-wrap"},[t._v(" Do you want to suspend all trademarks from the "),e("span",{staticClass:"secondary--text"},[t._v(t._s(this.channel.name))]),t._v("? ")]),e(k["a"],[e(j["a"]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"error",text:""},on:{click:t.deleteChannel}},[t._v(" Yes ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:""},on:{click:t.closeDialog}},[t._v(" No ")])],1)],1)],1)},_e=[],xe={props:["channel"],data(){return{dialog:!1}},computed:{loading(){return this.$store.getters.loading}},methods:{async deleteChannel(){await this.$store.dispatch("deleteChannel",this.channel.id),this.closeDialog()},closeDialog(){this.dialog=!1,this.error=""}},components:{Loader:x["default"]}},be=xe,ye=Object(N["a"])(be,fe,_e,!1,null,null,null),ke=ye.exports,Ce=function(){var t=this,e=t._self._c;return e(C["a"],{attrs:{persistent:"","max-width":"500px","hide-overlay":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b["a"],t._g({staticClass:"text-lowercase",attrs:{color:"secondary",icon:""}},a),[e(P["a"],{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(B["a"],t._g({attrs:{small:""}},a),[t._v("mdi-lead-pencil")])]}}],null,!0)},[e("span",[t._v("edit")])])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?e("div",{staticClass:"text-center"},[e("loader")],1):e(y["a"],[e(k["c"],{staticClass:"subtitle-2 pt-6 text-pre-wrap"},[t._v(" Editing the trademarks, registered in the chain "),e("span",{staticClass:"secondary--text"},[t._v(t._s(t.name))])]),e(r["a"]),e(k["b"],{staticClass:"black--text"},[e(s["a"],{attrs:{"grid-list-md":""}},[e($["a"],{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(i["a"],[e(u["a"],{attrs:{cols:"12",sm:"12",md:"12"}},[e(w["a"],{attrs:{dense:"",items:t.teamTrademarks,"item-text":"name",multiple:"",color:"secondary","item-color":"secondary",label:"trademarks",rules:[t.rules.not_empty]},on:{change:function(e){return t.onceMore()}},model:{value:t.trademark,callback:function(e){t.trademark=e},expression:"trademark"}})],1),e(u["a"],{attrs:{cols:"12",sm:"4",md:"4"}},[e(O["a"],{attrs:{color:"secondary",label:"entry fee*",name:"investments",type:"text",readonly:""},on:{change:function(e){return t.onceMore()}},model:{value:t.investments,callback:function(e){t.investments=t._n(e)},expression:"investments"}})],1),e(u["a"],{attrs:{cols:"12",sm:"4",md:"4"}},[e(O["a"],{attrs:{color:"secondary",label:"annual flat fee*",name:"operationals cost",type:"text",readonly:""},on:{change:function(e){return t.onceMore()}},model:{value:t.operational,callback:function(e){t.operational=t._n(e)},expression:"operational"}})],1)],1),e("div",{staticClass:"caption font-weight-bold text-left"},[t._v("*for all trademarks")])],1)],1),t.error?e(i["a"],{staticClass:"mx-2 error--text",attrs:{justify:"center"}},[t._v("! "+t._s(t.error))]):t._e(),e(i["a"],{staticClass:"text-center text-pre-wrap mx-2",attrs:{justify:"center"}},[t._v(t._s(t.message))])],1),e(r["a"]),e(k["a"],[e(j["a"]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",disabled:!t.valid||t.loading},on:{click:t.calculate}},[t._v(" Calculate ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",disabled:!t.changed||Boolean(t.error)},on:{click:t.changeChannel}},[t._v(" Upgrade ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:""},on:{click:t.closeDialog}},[t._v(" Close ")])],1)],1)],1)},$e=[],we={props:["chain","channel"],data(){return{dialog:!1,valid:!1,changed:!1,message:"",error:"",rules:{number:t=>/^[+]?[0-9]/.test(t)||"it's expected number",not_empty:t=>t.length>0||"select min 1 item"},trademark:this.channel.trademarks,name:this.chain.name,operational:Object(T["d"])(this.channel.operational_costs),investments:Object(T["d"])(this.channel.investment_costs),toAdd:[],toRemove:[]}},computed:{loading(){return this.$store.getters.loading},locale(){return this.$store.getters.locale},user(){return this.$store.getters.user},game(){return this.$store.getters.game},team(){return this.$store.getters.team},trademarks(){return this.$store.getters.trademarks},teamTrademarks(){let t=[];if(this.team){var e;const a=[];null===(e=this.team)||void 0===e||e.products.map(t=>{const e=a.find(e=>e===t.trademarkId);e||a.push(t.trademarkId)}),t=this.trademarks.filter(t=>-1!==a.indexOf(t.id))}return t}},methods:{onceMore(){this.error="",this.changed=!0,this.message=""},calculate(){if(this.$refs.form.validate()){if(this.trademark.length==this.channel.trademarks.length)return this.error=`no trademark registered in ${this.chain.name} have been changed`;const t=this.trademark,e=this.channel.trademarks;if((null===t||void 0===t?void 0:t.length)>(null===e||void 0===e?void 0:e.length)){t.forEach(t=>{const a=e.find(e=>e.name==t);a||this.toAdd.push(t)});const a=this.trademark.length;this.investments=this.chain.entry_fee*a,this.operational=this.chain.annual_fee*a;const s=this.toAdd.join(" ");this.message=`if you want to add to the chain trademark(s): ${s},\n\t\t\t\t\t\t\tplease, mention new figures of the entry and annual flat fee,\n\t\t\t\t\t\t\tand press the button Upgrade`}else{e.forEach(e=>{const a=t.find(t=>t==e.name);a||this.toRemove.push(e.name)});const a=this.toRemove.join(", "),s=this.trademark.length;this.investments=this.chain.entry_fee*s,this.operational=this.chain.annual_fee*s,this.message=`if you want to remove from the chain trademark(s): ${a},\n\t\t\t\t\t\t\tplease, mention new figures of the entry and annual flat fee,\n\t\t\t\t\t\t\tand press the button Upgrade`}}},async changeChannel(){if(this.trademark!==this.channel.trademarks){const t={id:this.channel.id,stores:this.channel.stores,investment_costs:this.investments,operational_costs:this.operational};await this.$store.dispatch("editChannel",t),this.toRemove.length>0?this.toRemove.forEach(async t=>{this.removeTrademark(encodeURIComponent(t))}):this.toAdd.length>0&&this.toAdd.forEach(t=>{this.addTrademarktoChannel(t)}),this.closeDialog()}},closeDialog(){this.dialog=!1,this.error="",this.message="",this.selected=this.channel.trademarks,this.changed=!1},async addTrademarktoChannel(t){const e={channelId:this.channel.id,trademark:t};await this.$store.dispatch("addTrademarkToChannel",e)},async removeTrademark(t){const e={channelId:this.channel.id,trademark:t};await this.$store.dispatch("removeTrademarkFromChannel",e)}},components:{Loader:x["default"]},async mounted(){var t;if(!this.team&&this.game&&this.user){const t=`${this.user.name}_${this.game.id}`,a=this.game.teams.find(e=>e.name==t);try{await this.$store.dispatch("fetchTeam",a.id)}catch(e){await this.$store.dispatch("setError",e.message)}}if((null===(t=this.trademarks)||void 0===t?void 0:t.length)<1)try{await this.$store.dispatch("fetchProducts")}catch(e){await this.$store.dispatch("setError",e.message)}}},je=we,Oe=Object(N["a"])(je,Ce,$e,!1,null,null,null),Ie=Oe.exports,Se={data(){return{icon:"arrow_right",headers:["Trademarks","Stores","Peak market coverage","Investment costs","Sales in units (last year)","Operational cost","Franchise cost*","Franchise fee *","Action"],headers2:["Status","Stores","Peak market coverage","Last year sales (units)","Entry fee","Annual flat fee","Target retail margin","Min preferable price","Max preferable price","Number of trademarks","Main / second design"],panel:0,panel2:0}},computed:{loading(){return this.$store.getters.loading},locale(){return this.$store.getters.locale},user(){return this.$store.getters.user},game(){return this.$store.getters.game},chains(){return this.$store.getters.chains},channels(){return this.$store.getters.channels},onlineStores(){var t;let e=[];return(null===(t=this.channels)||void 0===t?void 0:t.length)>0&&(e=this.channels.filter(t=>1===t.type)),e},outlets(){var t;let e=[];return(null===(t=this.channels)||void 0===t?void 0:t.length)>0&&(e=this.channels.filter(t=>3===t.type||2===t.type)),e},franchises(){var t;let e=[];return(null===(t=this.channels)||void 0===t?void 0:t.length)>0&&(e=this.channels.filter(t=>4===t.type)),e},marketplaces(){var t;let e=[];return(null===(t=this.chains)||void 0===t?void 0:t.length)>0&&(e=this.chains.filter(t=>"online"==t.type)),e},bm_chains(){var t;let e=[];return(null===(t=this.chains)||void 0===t?void 0:t.length)>0&&(e=this.chains.filter(t=>"brick&mortar"==t.type)),e}},methods:{formatNumber(t){return t?Object(T["d"])(t,this.locale):0},channelTrademarks(t){const e=t.trademarks.map(t=>t.name);return e.join(", ")},status(t){var e;const a=null===(e=this.channels)||void 0===e?void 0:e.find(e=>e.name==t.name&&e.stores>0);return a?"registered":" - "},getChannel(t){var e;const a=null===(e=this.channels)||void 0===e?void 0:e.find(e=>e.name==t.name);return a||(this.error="channel not found!!!!")},lastSales(t){var e;const a=null===(e=this.channels)||void 0===e?void 0:e.find(e=>e.name==t.name);return a?a.sales_last:0}},components:{addChannel:Lt,deleteChannel:Wt,changeChannel:Kt,sellFranchise:re,changeFranchise:de,register:ge,suspend:ke,change:Ie,Loader:x["default"]},async mounted(){if(null==this.channels&&this.game&&this.user){const e=`${this.user.name}_${this.game.id}`,a=this.game.teams.find(t=>t.name==e),s={gameId:this.game.id,round:this.game.round,teamId:a.id};try{await this.$store.dispatch("fetchTeamChannels",s)}catch(t){await this.$store.dispatch("setError",t.message)}}if(null==this.chains&&this.game)try{await this.$store.dispatch("fetchChains",this.game.id)}catch(t){await this.$store.dispatch("setError",t.message)}}},Ae=Se,Te=Object(N["a"])(Ae,Mt,Et,!1,null,null,null),Me=Te.exports,Ee=function(){var t,e,a=this,n=a._self._c;return n(s["a"],{attrs:{fluid:""}},[a.loading?n("div",{staticClass:"text-center"},[n("loader")],1):n("div",[n(i["a"],{staticClass:"my-2 subtitle-2 secondary--text pl-12"},[a._v(" Promotion ")]),n(i["a"],{staticClass:"subtitle-2 mx-8",attrs:{"no-gutters":""}},a._l(a.headers,(function(t,e){return n(u["a"],{key:e,staticClass:"tabCell",class:t.style},[a._v(" "+a._s(t.text)+" ")])})),1),(null===(t=a.spots)||void 0===t?void 0:t.length)>0?n("div",[n(g["a"],{attrs:{focusable:""},model:{value:a.panel,callback:function(t){a.panel=t},expression:"panel"}},[n(m["a"],[n(v["a"],{staticClass:"font-weight-bold secondary--text"},[a._v(" Advertising (spots) ")]),n(p["a"],{staticClass:"body-2"},a._l(a.spots,(function(t){return n("div",{key:t.id},[n(i["a"],{attrs:{"no-gutters":""}},[n(u["a"],{staticClass:"text-left"},[a._v(a._s(t.name))]),n(u["a"],{staticClass:"text-center"},[a._v(a._s(t.trademark.name))]),n(u["a"],{staticClass:"text-center"},[a._v(a._s(t.core_message))]),n(u["a"],{staticClass:"text-center"},[a._v(a._s(t.advanced_feature))]),n(u["a"],{staticClass:"text-center"},[a._v(a._s(t.price))]),n(u["a"],{staticClass:"text-center"},[a._v(a._s(a.values(t.value)))]),n(u["a"],{staticClass:"text-center"},[a._v(a._s(a.fromArr(t.channels)))]),n(u["a"],{staticClass:"text-center"},[a._v(a._s(a.fromArr(t.segments)))]),n(u["a"],{staticClass:"text-center"},[a._v(a._s(t.quality))]),n(u["a"],{staticClass:"text-center"},[a._v(a._s(a.formatNumber(t.investments)))]),n(u["a"],{staticClass:"text-center"},[a._v(a._s(a.formatNumber(t.operations)))]),n(u["a"],{staticClass:"text-right"},[n("delete-spot",{attrs:{spot:t}})],1)],1),n(r["a"])],1)})),0)],1)],1)],1):n(i["a"],{staticClass:"mt-8 px-4",attrs:{justify:"center"}},[a._v(" You haven't advertising spots yet! ")]),n(i["a"],{staticClass:"my-4 mx-8",attrs:{justify:"start"}},[n("add-spot")],1),n(i["a"],{staticClass:"subtitle-2 mx-8",attrs:{"no-gutters":""}},a._l(a.headers2,(function(t,e){return n(u["a"],{key:e,staticClass:"tabCell",class:t.style},[a._v(" "+a._s(t.text)+" ")])})),1),(null===(e=a.promotions)||void 0===e?void 0:e.length)>0?n("div",[n(g["a"],{attrs:{focusable:""},model:{value:a.panel,callback:function(t){a.panel=t},expression:"panel"}},[n(m["a"],[n(v["a"],{staticClass:"font-weight-bold secondary--text"},[a._v(" Promotion (actions) ")]),n(p["a"],{staticClass:"body-2"},a._l(a.promotions,(function(t){return n("div",{key:t.id},[n(i["a"],{attrs:{"no-gutters":""}},[n(u["a"],{staticClass:"text-left"},[a._v(a._s(t.name))]),n(u["a"],{staticClass:"text-center"},[a._v(a._s(t.trademark.name))]),n(u["a"],{staticClass:"text-center"},[a._v(a._s(100*t.cashback)+" %")]),n(u["a"],{staticClass:"text-center"},[a._v(a._s(t.gift_cost))]),n(u["a"],{staticClass:"text-right"},[n("delete-action",{attrs:{action:t}})],1)],1),n(r["a"])],1)})),0)],1)],1)],1):n(i["a"],{staticClass:"mt-8 px-4",attrs:{justify:"center"}},[a._v(" You haven't promotion actions yet! ")]),n(i["a"],{staticClass:"my-4 mx-8",attrs:{justify:"start"}},[n("add-action")],1)],1)])},Ne=[],De=function(){var t=this,e=t._self._c;return e(C["a"],{attrs:{persistent:"",scrollable:"","max-width":"600px","hide-overlay":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b["a"],t._g({staticClass:"text-lowercase mr-4",attrs:{color:"secondary",dark:"",small:""}},a),[t._v("add spot")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?e("div",{staticClass:"text-center"},[e("loader")],1):e(y["a"],[e(k["c"],{staticClass:"subtitle-2 pt-6"},[t._v(" New spot parameters ")]),e(r["a"]),e(k["b"],{staticClass:"black--text"},[e(s["a"],{attrs:{"grid-list-md":""}},[e($["a"],{ref:"form",attrs:{validation:""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(i["a"],[e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(O["a"],{attrs:{dense:"",color:"primary",label:"spot's quality*",name:"quality",type:"text",hint:"it's expected number between 1 and 5","persistent-hint":"",rules:[t.rules.required,t.rules.number,t.rules.max]},on:{change:function(e){return t.onceMore()}},model:{value:t.quality,callback:function(e){t.quality=t._n(e)},expression:"quality"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(w["a"],{attrs:{dense:"",color:"secondary",label:"core message*",items:t.core_messages,"item-color":"secondary",rules:[t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.core_message,callback:function(e){t.core_message=e},expression:"core_message"}})],1),e(u["a"],{attrs:{cols:"12",sm:"12",md:"12"}},[e(w["a"],{attrs:{dense:"",multiple:"",color:"secondary",label:"channels*",items:t.all_channels,"item-color":"secondary",rules:[t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.channels,callback:function(e){t.channels=e},expression:"channels"}})],1),e(u["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[e(w["a"],{attrs:{dense:"","return-object":"",items:t.teamTrademarks,"item-text":"name","item-value":"id",color:"secondary","item-color":"secondary",label:"trademark*",rules:[t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.trademark,callback:function(e){t.trademark=e},expression:"trademark"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(w["a"],{attrs:{dense:"",color:"secondary","return-object":"",label:"advanced feature",items:t.features,"item-text":"text","item-value":"value","item-color":"secondary"},on:{change:function(e){return t.onceMore()}},model:{value:t.af,callback:function(e){t.af=e},expression:"af"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(w["a"],{attrs:{dense:"",color:"secondary",label:"price",items:t.prices,"item-color":"secondary"},on:{change:function(e){return t.onceMore()}},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1),e(u["a"],{staticClass:"text-left",attrs:{cols:"12",sm:"6",md:"4"}},[e(w["a"],{attrs:{dense:"",color:"secondary",label:"objective*",items:t.objectives,"item-color":"secondary",rules:[t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.objective,callback:function(e){t.objective=e},expression:"objective"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(O["a"],{attrs:{dense:"",color:"secondary",label:"spot name",type:"text",readonly:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(w["a"],{attrs:{dense:"",color:"secondary",label:"value*",items:t.values,"item-text":"text","item-value":"value","item-color":"secondary",rules:[t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(w["a"],{attrs:{dense:"",multiple:"","return-object":"",items:t.segments,"item-text":"segment.name","item-value":"segment.pick_size",color:"secondary","item-color":"secondary",label:"segments* (multiple)",rules:[t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.pick_segments,callback:function(e){t.pick_segments=e},expression:"pick_segments"}})],1)],1)],1),e("div",{staticClass:"caption font-weight-bold text-left"},[t._v("* required field")])],1),e(i["a"],{staticClass:"error--text",attrs:{justify:"center"}},[t._v(t._s(t.error))]),e(i["a"],{staticClass:"text-center text-pre-wrap mx-2",attrs:{justify:"center"}},[t._v(t._s(t.message))])],1),e(r["a"]),e(k["a"],[e(j["a"]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",disabled:!t.valid||Boolean(t.error)},on:{click:t.calculating}},[t._v(" Calculate ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",disabled:!t.calculate||Boolean(t.error)},on:{click:t.addSpot}},[t._v("Save ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:""},on:{click:t.closeDialog}},[t._v(" Close ")])],1)],1)],1)},ze=[],Be=a("d713"),Pe={name:"AddTeamSpot",data(){return{dialog:!1,valid:!1,error:"",message:"",calculate:!1,rules:{required:t=>!!t||"this field is required",number:t=>/^[+]?[0-9]/.test(t)||"it's expected number",max:t=>t<=5||"max 5 expected"},trademark:null,core_message:"",af:{text:"",value:0},value:"",pick_segments:[],channels:[],price:"",objective:"",quality:1,investments:0,operations:0}},computed:{loading(){return this.$store.getters.loading},locale(){return this.$store.getters.locale},game(){return this.$store.getters.game},user(){return this.$store.getters.user},team(){return this.$store.getters.team},spots(){return this.$store.getters.spots},segments(){return this.$store.getters.market_segments},trademarks(){return this.$store.getters.trademarks},all_channels(){return this.$store.getters.CHANNELS},core_messages(){return this.$store.getters.CORE_MESSAGES},features(){return this.$store.getters.FEATURES},prices(){return this.$store.getters.PRICES},objectives(){return this.$store.getters.OBJECTIVES},values(){return this.$store.getters.VALUES},teamTrademarks(){let t=[];if(this.team){var e;const a=[];null===(e=this.team)||void 0===e||e.products.map(t=>{const e=a.find(e=>e===t.trademarkId);e||a.push(t.trademarkId)}),t=this.trademarks.filter(t=>-1!==a.indexOf(t.id))}return t},marketSize(){let t=0;return this.segments.length>0&&(t=this.segments.reduce((t,e)=>t+e.segment.peak_size,0)),t},name:{get(){return this.trademark?this.trademark.name+" Ad":""},set(t){return t}}},methods:{localeNumber(t){return"ro-RO"==this.locale?t.toLocaleString("en-US"):t.toLocaleString(this.locale)},onceMore(){this.error="",this.calculate=!1,this.message=""},calculating(){if(this.$refs.form.validate()){var t;const e=null===(t=this.spots)||void 0===t?void 0:t.find(t=>t.name==this.name);if(e)return this.error=`Promotion spot the trademark ${e.name.split(" ")[0]} already exists`;this.investments=Object(Be["a"])(this.quality,this.channels),this.operations=Object(Be["b"])(this.channels,this.pick_segments,this.marketSize),this.message=`Please, mention the figures:\n\t\t\t\t\tspot investments = ${this.localeNumber(this.investments)}\n                    operational costs = ${this.localeNumber(this.operations)}\n\t\t\t\t\tif you agree, press the button Save`,this.calculate=!0}},async addSpot(){if(this.$refs.form.validate()){const e=this.pick_segments.map(t=>t.segment.name),a=this.af.text?this.af.text:"",s={gameId:Number(this.game.id),round:Number(this.game.round),register_round:Number(this.game.round),team:this.team,name:this.name,core_message:this.core_message,advanced_feature:a,price:this.price,value:this.value,objective:this.objective,quality:this.quality,trademark:this.trademark,segments:e,channels:this.channels,investments:this.investments,operations:this.operations};console.log(s);try{await this.$store.dispatch("addTeamSpot",s),this.closeDialog()}catch(t){this.error="Error: "+t.message,this.message="",this.$store.dispatch("setError",t.message)}}},closeDialog(){this.dialog=!1,this.error="",this.message="",this.calculate=!1,this.name="",this.$refs.form.reset(),this.trademark=[],this.core_message="",this.af={text:"",value:0},this.value="",this.pick_segments=[],this.channels=[],this.price="",this.objective="",this.quality=1}},async mounted(){var t,e;if((null===(t=this.segments)||void 0===t?void 0:t.length)<1&&this.game)try{await this.$store.dispatch("fetchMarketSegments",{gameId:this.game.id,round:this.game.round})}catch(a){await this.$store.dispatch("setError",a.message)}if((null===(e=this.trademarks)||void 0===e?void 0:e.length)<1)try{await this.$store.dispatch("fetchTrademarks")}catch(a){await this.$store.dispatch("setError",a.message)}if(!this.team&&this.game&&this.user){const t=`${this.user.name}_${this.game.id}`,e=this.game.teams.find(e=>e.name==t);try{await this.$store.dispatch("fetchTeam",e.id)}catch(a){await this.$store.dispatch("setError",a.message)}}},components:{Loader:x["default"]}},qe=Pe,Le=Object(N["a"])(qe,De,ze,!1,null,null,null),Re=Le.exports,Fe=function(){var t=this,e=t._self._c;return e(C["a"],{attrs:{"max-width":"400px","hide-overlay":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b["a"],t._g({staticClass:"text-lowercase",attrs:{color:"secondary",icon:""}},a),[e(P["a"],{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(B["a"],t._g({attrs:{small:""}},a),[t._v("mdi-delete")])]}}],null,!0)},[e("span",[t._v("delete spot")])])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?e("div",{staticClass:"text-center"},[e("loader")],1):e(y["a"],{staticClass:"text-md-center"},[e(k["c"],{staticClass:"subtitle-2 pt-6 text-pre-wrap"},[t._v(" Do you really want to delete the spot "),e("span",{staticClass:"secondary--text"},[t._v(t._s(t.spot.name)+" ")]),t._v("? ")]),e(r["a"]),e(k["a"],[e(j["a"]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:""},on:{click:t.closeDialog}},[t._v(" No ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"error",text:""},on:{click:t.deleteSpot}},[t._v(" Yes ")])],1)],1)],1)},Ue=[],Ye={props:["spot"],data(){return{dialog:!1}},computed:{loading(){return this.$store.getters.loading}},methods:{async deleteSpot(){if(this.spot&&this.spot.id){const e=this.spot.id;try{await this.$store.dispatch("deleteSpot",e)}catch(t){console.log(t.message)}this.closeDialog()}},closeDialog(){this.dialog=!1}},components:{Loader:x["default"]}},He=Ye,We=Object(N["a"])(He,Fe,Ue,!1,null,null,null),Ve=We.exports,Ze=function(){var t=this,e=t._self._c;return e(C["a"],{attrs:{persistent:"",scrollable:"","max-width":"600px","hide-overlay":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b["a"],t._g({staticClass:"text-lowercase mr-4",attrs:{color:"secondary",dark:"",small:""}},a),[t._v("add promotion")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?e("div",{staticClass:"text-center"},[e("loader")],1):e(y["a"],[e(k["c"],{staticClass:"subtitle-2 pt-6"},[t._v(" New promotion action parameters ")]),e(r["a"]),e(k["b"],{staticClass:"black--text"},[e(s["a"],{attrs:{"grid-list-md":""}},[e($["a"],{ref:"form",attrs:{validation:""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(i["a"],{attrs:{justify:"center"}},[e(u["a"],{attrs:{cols:"12",sm:"6",md:"6"}},[e(O["a"],{attrs:{dense:"",color:"secondary",label:"action name",type:"text",rules:[t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(O["a"],{attrs:{dense:"",color:"primary",label:"cashback",name:"cashback",hint:"either cashback or gift cost must be more 0","persistent-hint":"",suffix:"%",type:"text"},on:{change:function(e){return t.onceMore()}},model:{value:t.cashback,callback:function(e){t.cashback=t._n(e)},expression:"cashback"}})],1),e(u["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(O["a"],{attrs:{dense:"",color:"primary",label:"gift cost",name:"gift_cost",hint:"either cashback or gift cost must be more 0","persistent-hint":"",prefix:"$",type:"text"},on:{change:function(e){return t.onceMore()}},model:{value:t.gift_cost,callback:function(e){t.gift_cost=t._n(e)},expression:"gift_cost"}})],1),e(u["a"],{attrs:{cols:"12",md:"6",sm:"6"}},[e(w["a"],{attrs:{dense:"","return-object":"",items:t.teamTrademarks,"item-text":"name","item-value":"id",color:"secondary","item-color":"secondary",label:"trademark",rules:[t.rules.required]},on:{change:function(e){return t.onceMore()}},model:{value:t.trademark,callback:function(e){t.trademark=e},expression:"trademark"}})],1)],1)],1)],1),e(i["a"],{staticClass:"error--text",attrs:{justify:"center"}},[t._v(t._s(t.error))]),e(i["a"],{staticClass:"text-center text-pre-wrap mx-2",attrs:{justify:"center"}},[t._v(t._s(t.message))])],1),e(r["a"]),e(k["a"],[e(j["a"]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:"",disabled:!t.valid||Boolean(t.error)},on:{click:t.addAction}},[t._v("Save ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:""},on:{click:t.closeDialog}},[t._v(" Close ")])],1)],1)],1)},Xe=[],Ge={name:"AddTeamAction",data(){return{dialog:!1,valid:!1,error:"",message:"",rules:{required:t=>!!t||"this field is required"},name:"",trademark:null,cashback:0,gift_cost:0}},computed:{loading(){return this.$store.getters.loading},locale(){return this.$store.getters.locale},game(){return this.$store.getters.game},user(){return this.$store.getters.user},team(){return this.$store.getters.team},promotions(){return this.$store.getters.promotions},trademarks(){return this.$store.getters.trademarks},teamTrademarks(){let t=[];if(this.team){var e;const a=[];null===(e=this.team)||void 0===e||e.products.map(t=>{const e=a.find(e=>e===t.trademarkId);e||a.push(t.trademarkId)}),t=this.trademarks.filter(t=>-1!==a.indexOf(t.id))}return t}},methods:{onceMore(){this.error="",this.calculate=!1,this.message=""},async addAction(){if(this.$refs.form.validate()){var t;if(0==this.cashback&&0==this.gift_cost)return this.error="you need to specify either cashback or gift cost";const a=null===(t=this.promotions)||void 0===t?void 0:t.find(t=>t.trademarkId==this.trademark.id);if(a)return this.error=`Promotion of the trademark ${this.trademark.name} already exists`;const s={gameId:this.game.id,round:this.game.round,team:this.team,name:this.name,cashback:this.cashback/100,trademark:this.trademark,gift_cost:this.gift_cost};try{await this.$store.dispatch("addTeamPromotion",s),this.closeDialog()}catch(e){this.error="Error: "+e.message,this.message="",this.$store.dispatch("setError",e.message)}}},closeDialog(){this.dialog=!1,this.error="",this.message="",this.name="",this.$refs.form.reset(),this.trademark=[]}},components:{Loader:x["default"]},async mounted(){var t;if((null===(t=this.trademarks)||void 0===t?void 0:t.length)<1)try{await this.$store.dispatch("fetchTrademarks")}catch(a){await this.$store.dispatch("setError",a.message)}if(!this.team&&this.game&&this.user){var e;const t=`${this.user.name}_${this.game.id}`,s=null===(e=this.game.teams)||void 0===e?void 0:e.find(e=>e.name==t);try{await this.$store.dispatch("fetchTeam",s.id)}catch(a){await this.$store.dispatch("setError",a.message)}}}},Je=Ge,Ke=(a("b29c"),Object(N["a"])(Je,Ze,Xe,!1,null,null,null)),Qe=Ke.exports,ta=function(){var t=this,e=t._self._c;return e(C["a"],{attrs:{"max-width":"400px","hide-overlay":""},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(b["a"],t._g({staticClass:"text-lowercase",attrs:{color:"secondary",icon:""}},a),[e(P["a"],{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(B["a"],t._g({attrs:{small:""}},a),[t._v("mdi-delete")])]}}],null,!0)},[e("span",[t._v("delete promotion")])])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.loading?e("div",{staticClass:"text-center"},[e("loader")],1):e(y["a"],{staticClass:"text-md-center"},[e(k["c"],{staticClass:"subtitle-2 pt-6 text-pre-wrap"},[t._v(" Do you want to delete "),e("span",{staticClass:"secondary--text"},[t._v(t._s(t.action.name)+" ")]),t._v("? ")]),e(r["a"]),e(k["a"],[e(j["a"]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"secondary",text:""},on:{click:t.closeDialog}},[t._v(" No ")]),e(b["a"],{staticClass:"text-capitalize",attrs:{color:"error",text:""},on:{click:t.deleteAction}},[t._v(" Yes ")])],1)],1)],1)},ea=[],aa={props:["action"],data(){return{dialog:!1}},computed:{loading(){return this.$store.getters.loading}},methods:{async deleteAction(){if(this.action&&this.action.id){const e=this.action.id;try{await this.$store.dispatch("deleteAction",e)}catch(t){console.log(t.message)}this.closeDialog()}},closeDialog(){this.dialog=!1}},components:{Loader:x["default"]}},sa=aa,ra=Object(N["a"])(sa,ta,ea,!1,null,null,null),ia=ra.exports,na={data(){return{icon:"arrow_right",headers:[{text:"Spot name",style:"text-left"},{text:"Trademark",style:"text-center"},{text:"Core message",style:"text-center"},{text:"Advanced feature",style:"text-center"},{text:"Price",style:"text-center"},{text:"Values",style:"text-center"},{text:"Channels",style:"text-center"},{text:"Segments",style:"text-center"},{text:"Quality level",style:"text-center"},{text:"Investments",style:"text-center"},{text:"Operations",style:"text-center"},{text:"Action",style:"text-right"}],headers2:[{text:"Promotion action name",style:"text-left"},{text:"Trademark",style:"text-center"},{text:"Cashback",style:"text-center"},{text:"Gift cost",style:"text-center"},{text:"Action",style:"text-right"}],panel:0,first_mount:!0}},computed:{loading(){return this.$store.getters.loading},locale(){return this.$store.getters.locale},user(){return this.$store.getters.user},game(){return this.$store.getters.game},spots(){return this.$store.getters.spots},promotions(){return this.$store.getters.promotions}},methods:{fromArr(t){return Object(T["f"])(t)},formatNumber(t){return Object(T["d"])(t,this.locale)},values(t){let e=t;switch(t){case"family":e+=" / kids";break;case"attractiveness":e="personal attractiveness";break;case"personality":e="strong personality";break;case"social_status":e="social status";break;case"independent":e+=" lifestyle"}return e}},components:{addSpot:Re,addAction:Qe,deleteSpot:Ve,deleteAction:ia,Loader:x["default"]},async mounted(){if(null==this.spots&&this.game&&this.user){const t=`${this.user.name}_${this.game.id}`,e=this.game.teams.find(e=>e.name==t),a={gameId:this.game.id,round:this.game.round,teamId:e.id};await this.$store.dispatch("fetchTeamSpots",a)}if(null==this.promotions&&this.game&&this.user){const t=`${this.user.name}_${this.game.id}`,e=this.game.teams.find(e=>e.name==t),a={gameId:this.game.id,round:this.game.round,teamId:e.id};await this.$store.dispatch("fetchTeamPromotions",a)}}},oa=na,la=Object(N["a"])(oa,Ee,Ne,!1,null,null,null),ca=la.exports,da={data(){return{tab:0,items:["Sales","Retail","Promotion","Resources"]}},computed:{loading(){return this.$store.getters.loading},user(){return this.$store.getters.user},game(){return this.$store.getters.game}},methods:{link(t){return"/team/decisions/"+t.toLowerCase()},teamId(){if(this.game&&this.user){const t=`${this.user.name}_${this.game.id}`,e=this.game.teams.find(e=>e.name==t);return null===e||void 0===e?void 0:e.id}}},components:{Loader:x["default"],ProductManagement:nt,Sales:_t,Retail:Me,Promotion:ca,Resources:Tt},async mounted(){if(!this.game&&this.user){const e=this.user.email.match(/\d/g);try{await this.$store.dispatch("fetchGame",e)}catch(t){console.log(t.message)}}}},ha=da,ua=Object(N["a"])(ha,d,h,!1,null,null,null);e["default"]=ua.exports},"169a":function(t,e,a){"use strict";a("368e");var s=a("480e"),r=a("4ad4"),i=a("b848"),n=a("75eb"),o=a("1abc"),l=a("80d2"),c=a("2b0e"),d=c["default"].extend().extend({name:"overlayable",props:{hideOverlay:Boolean,overlayColor:String,overlayOpacity:[Number,String]},data(){return{animationFrame:0,overlay:null}},watch:{hideOverlay(t){this.isActive&&(t?this.removeOverlay():this.genOverlay())}},beforeDestroy(){this.removeOverlay()},methods:{createOverlay(){const t=new o["a"]({propsData:{absolute:this.absolute,value:!1,color:this.overlayColor,opacity:this.overlayOpacity}});t.$mount();const e=this.absolute?this.$el.parentNode:document.querySelector("[data-app]");e&&e.insertBefore(t.$el,e.firstChild),this.overlay=t},genOverlay(){if(this.hideScroll(),!this.hideOverlay)return this.overlay||this.createOverlay(),this.animationFrame=requestAnimationFrame(()=>{this.overlay&&(void 0!==this.activeZIndex?this.overlay.zIndex=String(this.activeZIndex-1):this.$el&&(this.overlay.zIndex=Object(l["r"])(this.$el)),this.overlay.value=!0)}),!0},removeOverlay(t=!0){this.overlay&&(Object(l["a"])(this.overlay.$el,"transitionend",()=>{this.overlay&&this.overlay.$el&&this.overlay.$el.parentNode&&!this.overlay.value&&!this.isActive&&(this.overlay.$el.parentNode.removeChild(this.overlay.$el),this.overlay.$destroy(),this.overlay=null)}),cancelAnimationFrame(this.animationFrame),this.overlay.value=!1),t&&this.showScroll()},scrollListener(t){if("keydown"===t.type){if(["INPUT","TEXTAREA","SELECT"].includes(t.target.tagName)||t.target.isContentEditable)return;const e=[l["t"].up,l["t"].pageup],a=[l["t"].down,l["t"].pagedown];if(e.includes(t.keyCode))t.deltaY=-1;else{if(!a.includes(t.keyCode))return;t.deltaY=1}}(t.target===this.overlay||"keydown"!==t.type&&t.target===document.body||this.checkPath(t))&&t.preventDefault()},hasScrollbar(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return(["auto","scroll"].includes(e.overflowY)||"SELECT"===t.tagName)&&t.scrollHeight>t.clientHeight||["auto","scroll"].includes(e.overflowX)&&t.scrollWidth>t.clientWidth},shouldScroll(t,e){if(t.hasAttribute("data-app"))return!1;const a=e.shiftKey||e.deltaX?"x":"y",s="y"===a?e.deltaY:e.deltaX||e.deltaY;let r,i;"y"===a?(r=0===t.scrollTop,i=t.scrollTop+t.clientHeight===t.scrollHeight):(r=0===t.scrollLeft,i=t.scrollLeft+t.clientWidth===t.scrollWidth);const n=s<0,o=s>0;return!(r||!n)||(!(i||!o)||!(!r&&!i)&&this.shouldScroll(t.parentNode,e))},isInside(t,e){return t===e||null!==t&&t!==document.body&&this.isInside(t.parentNode,e)},checkPath(t){const e=Object(l["f"])(t);if("keydown"===t.type&&e[0]===document.body){const e=this.$refs.dialog,a=window.getSelection().anchorNode;return!(e&&this.hasScrollbar(e)&&this.isInside(a,e))||!this.shouldScroll(e,t)}for(let a=0;a<e.length;a++){const s=e[a];if(s===document)return!0;if(s===document.documentElement)return!0;if(s===this.$refs.content)return!0;if(this.hasScrollbar(s))return!this.shouldScroll(s,t)}return!0},hideScroll(){this.$vuetify.breakpoint.smAndDown?document.documentElement.classList.add("overflow-y-hidden"):(Object(l["b"])(window,"wheel",this.scrollListener,{passive:!1}),window.addEventListener("keydown",this.scrollListener))},showScroll(){document.documentElement.classList.remove("overflow-y-hidden"),window.removeEventListener("wheel",this.scrollListener),window.removeEventListener("keydown",this.scrollListener)}}}),h=a("e4d3"),u=a("21be"),m=a("a293"),p=a("58df"),v=a("d9bd");const g=Object(p["a"])(i["a"],n["a"],d,h["a"],u["a"],r["a"]);e["a"]=g.extend({name:"v-dialog",directives:{ClickOutside:m["a"]},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:[String,Number],noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:[String,Number]},data(){return{activatedBy:null,animate:!1,animateTimeout:-1,stackMinZIndex:200,previousActiveElement:null}},computed:{classes(){return{[("v-dialog "+this.contentClass).trim()]:!0,"v-dialog--active":this.isActive,"v-dialog--persistent":this.persistent,"v-dialog--fullscreen":this.fullscreen,"v-dialog--scrollable":this.scrollable,"v-dialog--animated":this.animate}},contentClasses(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive(t){var e;t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null==(e=this.previousActiveElement)||e.focus())},fullscreen(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created(){this.$attrs.hasOwnProperty("full-width")&&Object(v["e"])("full-width",this)},beforeMount(){this.$nextTick(()=>{this.isBooted=this.isActive,this.isActive&&this.show()})},beforeDestroy(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick(){this.animate=!1,this.$nextTick(()=>{this.animate=!0,window.clearTimeout(this.animateTimeout),this.animateTimeout=window.setTimeout(()=>this.animate=!1,150)})},closeConditional(t){const e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):d.options.methods.hideScroll.call(this)},show(){!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick(()=>{this.$nextTick(()=>{var t,e;null!=(t=this.$refs.dialog)&&t.contains(document.activeElement)||(this.previousActiveElement=document.activeElement,null==(e=this.$refs.dialog)||e.focus());this.bind()})})},bind(){window.addEventListener("focusin",this.onFocusin)},unbind(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown(t){if(t.keyCode===l["t"].esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;const t=this.getActivator();this.$nextTick(()=>t&&t.focus())}this.$emit("keydown",t)},onFocusin(t){if(!t||!this.retainFocus)return;const e=t.target;if(e&&this.$refs.dialog&&![document,this.$refs.dialog].includes(e)&&!this.$refs.dialog.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some(t=>t.contains(e))){const t=this.$refs.dialog.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),e=[...t].find(t=>!t.hasAttribute("disabled"));e&&e.focus()}},genContent(){return this.showLazyContent(()=>[this.$createElement(s["a"],{props:{root:!0,light:this.light,dark:this.dark}},[this.$createElement("div",{class:this.contentClasses,attrs:{role:"dialog","aria-modal":this.hideOverlay?void 0:"true",...this.getScopeIdAttrs()},on:{keydown:this.onKeydown},style:{zIndex:this.activeZIndex},ref:"content"},[this.genTransition()])])])},genTransition(){const t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent(){const t={class:this.classes,attrs:{tabindex:this.isActive?0:void 0},ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style={...t.style,maxWidth:Object(l["g"])(this.maxWidth),width:Object(l["g"])(this.width)}),this.$createElement("div",t,this.getContentSlot())}},render(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},[this.genActivator(),this.genContent()])}})},"1abc":function(t,e,a){"use strict";var s=a("a797");e["a"]=s["a"]},"210b":function(t,e,a){},"2f9a":function(t,e,a){"use strict";a.d(e,"c",(function(){return p})),a.d(e,"b",(function(){return v})),a.d(e,"e",(function(){return g})),a.d(e,"a",(function(){return f})),a.d(e,"d",(function(){return _}));const s=[5.8,6.1,6.5,6.9,7.5],r=[4.4,5.1,6,6.6,7.5],i=[0,9,11,7,8,14,18,2,3,1],n=[50,70,90,140,200],o=[190,250,370,480,600],l=[700,770,860,1090,1290],c=[0,100,120,220,210,190,300,30,40,0],d=[.5,.5,.5,.5,.5],h=[.5,1,1.5,2,2.5],u=[1.5,2,2.5,3,3.5],m=[0,1,1.5,1,1.5,2,2,1,2,0];function p(t,e,a,n=0){const o=s[t-1]+r[e-1]+ +i[n]+.2*r[e-1]*a;return parseFloat(o.toFixed(2))}function v(t,e,a,s,r=0){const i=l[s-1]+n[t-1]+o[e-1]+ +c[r]+.2*l[s-1]*a;return parseFloat(i.toFixed(2))}function g(t,e,a,s,r,i,d,h=0){const u=Math.abs(n[r-1]-n[t-1])+Math.abs(o[i-1]-o[e-1])+ +c[h]+ +Math.abs(.2*l[s-1]*(d-a));return parseFloat(u.toFixed(2))}function f(t,e,a,s,r=0){const i=u[s-1]+h[e-1]+ +d[t-1]+m[r]+.5*a;return Math.ceil(i)}function _(t,e,a,s,r=0){const i=h[e-1]+ +d[t-1]+m[r]+.2*Math.abs(s-a)/s;return Math.ceil(i)}},"2fa4":function(t,e,a){"use strict";a("20f6");var s=a("80d2");e["a"]=Object(s["i"])("spacer","div","v-spacer")},"368e":function(t,e,a){},"3a2f":function(t,e,a){"use strict";a("9734");var s=a("4ad4"),r=a("a9ad"),i=a("16b7"),n=a("b848"),o=a("f573"),l=a("80d2"),c=a("d9bd"),d=a("58df");e["a"]=Object(d["a"])(r["a"],i["a"],n["a"],o["a"]).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},openOnFocus:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:()=>({calculatedMinWidth:0,closeDependents:!1}),computed:{calculatedLeft(){const{activator:t,content:e}=this.dimensions,a=!this.bottom&&!this.left&&!this.top&&!this.right,s=!1!==this.attach?t.offsetLeft:t.left;let r=0;return this.top||this.bottom||a?r=s+t.width/2-e.width/2:(this.left||this.right)&&(r=s+(this.right?t.width:-e.width)+(this.right?10:-10)),this.nudgeLeft&&(r-=parseInt(this.nudgeLeft)),this.nudgeRight&&(r+=parseInt(this.nudgeRight)),this.calcXOverflow(r,this.dimensions.content.width)+"px"},calculatedTop(){const{activator:t,content:e}=this.dimensions,a=!1!==this.attach?t.offsetTop:t.top;let s=0;return this.top||this.bottom?s=a+(this.bottom?t.height:-e.height)+(this.bottom?10:-10):(this.left||this.right)&&(s=a+t.height/2-e.height/2),this.nudgeTop&&(s-=parseInt(this.nudgeTop)),this.nudgeBottom&&(s+=parseInt(this.nudgeBottom)),!1===this.attach&&(s+=this.pageYOffset),this.calcYOverflow(s)+"px"},classes(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY(){return this.top||this.bottom},offsetX(){return this.left||this.right},styles(){return{left:this.calculatedLeft,maxWidth:Object(l["g"])(this.maxWidth),minWidth:Object(l["g"])(this.minWidth),top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount(){this.$nextTick(()=>{this.value&&this.callActivate()})},mounted(){"v-slot"===Object(l["q"])(this,"activator",!0)&&Object(c["b"])("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate(){this.runDelay("close")},genActivatorListeners(){const t=s["a"].options.methods.genActivatorListeners.call(this);return this.openOnFocus&&(t.focus=t=>{this.getActivator(t),this.runDelay("open")},t.blur=t=>{this.getActivator(t),this.runDelay("close")}),t.keydown=t=>{t.keyCode===l["t"].esc&&(this.getActivator(t),this.runDelay("close"))},t},genActivatorAttributes(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition(){const t=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[t]):t},genContent(){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:{[this.contentClass]:!0,menuable__content__active:this.isActive,"v-tooltip__content--fixed":this.activatorFixed},style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render(t){return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent(()=>[this.genTransition()]),this.genActivator()])}})},"49e2":function(t,e,a){"use strict";var s=a("0789"),r=a("9d65"),i=a("a9ad"),n=a("3206"),o=a("80d2"),l=a("58df");const c=Object(l["a"])(r["a"],i["a"],Object(n["a"])("expansionPanel","v-expansion-panel-content","v-expansion-panel"));e["a"]=c.extend().extend({name:"v-expansion-panel-content",data:()=>({isActive:!1}),computed:{parentIsActive(){return this.expansionPanel.isActive}},watch:{parentIsActive:{immediate:!0,handler(t,e){t&&(this.isBooted=!0),null==e?this.isActive=t:this.$nextTick(()=>this.isActive=t)}}},created(){this.expansionPanel.registerContent(this)},beforeDestroy(){this.expansionPanel.unregisterContent()},render(t){return t(s["a"],this.showLazyContent(()=>[t("div",this.setBackgroundColor(this.color,{staticClass:"v-expansion-panel-content",directives:[{name:"show",value:this.isActive}]}),[t("div",{class:"v-expansion-panel-content__wrap"},Object(o["p"])(this))])]))}})},9278:function(t,e,a){},9734:function(t,e,a){},"99d9":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return l}));var s=a("b0af"),r=a("80d2");const i=Object(r["i"])("v-card__actions"),n=Object(r["i"])("v-card__subtitle"),o=Object(r["i"])("v-card__text"),l=Object(r["i"])("v-card__title");s["a"]},b29c:function(t,e,a){"use strict";a("9278")},c865:function(t,e,a){"use strict";var s=a("0789"),r=a("9d26"),i=a("a9ad"),n=a("3206"),o=a("5607"),l=a("80d2"),c=a("58df");const d=Object(c["a"])(i["a"],Object(n["a"])("expansionPanel","v-expansion-panel-header","v-expansion-panel"));e["a"]=d.extend().extend({name:"v-expansion-panel-header",directives:{ripple:o["a"]},props:{disableIconRotate:Boolean,expandIcon:{type:String,default:"$expand"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1}},data:()=>({hasMousedown:!1}),computed:{classes(){return{"v-expansion-panel-header--active":this.isActive,"v-expansion-panel-header--mousedown":this.hasMousedown}},isActive(){return this.expansionPanel.isActive},isDisabled(){return this.expansionPanel.isDisabled},isReadonly(){return this.expansionPanel.isReadonly}},created(){this.expansionPanel.registerHeader(this)},beforeDestroy(){this.expansionPanel.unregisterHeader()},methods:{onClick(t){this.$emit("click",t)},genIcon(){const t=Object(l["p"])(this,"actions")||[this.$createElement(r["a"],this.expandIcon)];return this.$createElement(s["c"],[this.$createElement("div",{staticClass:"v-expansion-panel-header__icon",class:{"v-expansion-panel-header__icon--disable-rotate":this.disableIconRotate},directives:[{name:"show",value:!this.isDisabled}]},t)])}},render(t){return t("button",this.setBackgroundColor(this.color,{staticClass:"v-expansion-panel-header",class:this.classes,attrs:{tabindex:this.isDisabled?-1:null,type:"button","aria-expanded":this.isActive},directives:[{name:"ripple",value:this.ripple}],on:{...this.$listeners,click:this.onClick,mousedown:()=>this.hasMousedown=!0,mouseup:()=>this.hasMousedown=!1}}),[Object(l["p"])(this,"default",{open:this.isActive},!0),this.hideActions||this.genIcon()])}})},cd55:function(t,e,a){"use strict";var s=a("4e82"),r=a("3206"),i=a("80d2"),n=a("58df");e["a"]=Object(n["a"])(Object(s["a"])("expansionPanels","v-expansion-panel","v-expansion-panels"),Object(r["b"])("expansionPanel",!0)).extend({name:"v-expansion-panel",props:{disabled:Boolean,readonly:Boolean},data(){return{content:null,header:null,nextIsActive:!1}},computed:{classes(){return{"v-expansion-panel--active":this.isActive,"v-expansion-panel--next-active":this.nextIsActive,"v-expansion-panel--disabled":this.isDisabled,...this.groupClasses}},isDisabled(){return this.expansionPanels.disabled||this.disabled},isReadonly(){return this.expansionPanels.readonly||this.readonly}},methods:{registerContent(t){this.content=t},unregisterContent(){this.content=null},registerHeader(t){this.header=t,t.$on("click",this.onClick)},unregisterHeader(){this.header=null},onClick(t){t.detail&&this.header.$el.blur(),this.$emit("click",t),this.isReadonly||this.isDisabled||this.toggle()},toggle(){this.$nextTick(()=>this.$emit("change"))}},render(t){return t("div",{staticClass:"v-expansion-panel",class:this.classes,attrs:{"aria-expanded":String(this.isActive)}},Object(i["p"])(this))}})},d713:function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return r}));a("13d5");function s(t,e){const a=[1500,1900,2700,3700,5500],s=a[t-1];return s+(e.length-1)*s*.5}function r(t,e,a){let s=0;return t.forEach(t=>{switch(t){case"TV":s+=17e4;break;case"visual outdoor ads":s+=9e4;break;case"autoradio podcasts":s+=4e4;break;case"postal mailings":s+=.4*a;break;case"SMM":s+=e.reduce((t,e)=>t+.003*e.segment.peak_size,0);break;case"content marketing":s+=e.reduce((t,e)=>t+.002*e.segment.peak_size,0);break;case"influencers":s+=e.reduce((t,e)=>t+.05*e.segment.peak_size,0)}}),s}},f3ca:function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return l}));a("d9e2");const s=28e3,r=15e3,i=4e4,n=33e3;function o(t,e=1){if(1==t)return s;if(2==t||3==t)return r*e;throw new Error("undefined channel type: "+t)}function l(t,e=1){if(1==t)return i;if(2==t||3==t)return n*e;throw new Error("undefined channel type: "+t)}}}]);
//# sourceMappingURL=chunk-dace2830.544cb19e.js.map